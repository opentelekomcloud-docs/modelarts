:original_name: CreateNetwork.html

.. _CreateNetwork:

Creating Network Resources
==========================

Function
--------

This API is used to create network resources.

Debugging
---------

You can debug this API through automatic authentication in or use the SDK sample code generated by API Explorer.

URI
---

POST /v1/{project_id}/networks

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +-----------------+-----------------+-------------------------------------------------------------------------------------------------------+-----------------------------------+
   | Parameter       | Mandatory       | Type                                                                                                  | Description                       |
   +=================+=================+=======================================================================================================+===================================+
   | apiVersion      | Yes             | String                                                                                                | API version. Options:             |
   |                 |                 |                                                                                                       |                                   |
   |                 |                 |                                                                                                       | -  **v1**                         |
   +-----------------+-----------------+-------------------------------------------------------------------------------------------------------+-----------------------------------+
   | kind            | Yes             | String                                                                                                | Resource type. Options:           |
   |                 |                 |                                                                                                       |                                   |
   |                 |                 |                                                                                                       | -  **Network**                    |
   +-----------------+-----------------+-------------------------------------------------------------------------------------------------------+-----------------------------------+
   | metadata        | Yes             | :ref:`NetworkMetadataCreation <en-us_topic_0000001943967217__request_networkmetadatacreation>` object | Metadata of network resources.    |
   +-----------------+-----------------+-------------------------------------------------------------------------------------------------------+-----------------------------------+
   | spec            | Yes             | :ref:`NetworkSpec <en-us_topic_0000001943967217__request_networkspec>` object                         | Description of network resources. |
   +-----------------+-----------------+-------------------------------------------------------------------------------------------------------+-----------------------------------+

.. _en-us_topic_0000001943967217__request_networkmetadatacreation:

.. table:: **Table 3** NetworkMetadataCreation

   +-----------+-----------+---------------------------------------------------------------------------------------------------+--------------------------------------------------------+
   | Parameter | Mandatory | Type                                                                                              | Description                                            |
   +===========+===========+===================================================================================================+========================================================+
   | labels    | Yes       | :ref:`NetworkMetadataLabels <en-us_topic_0000001943967217__request_networkmetadatalabels>` object | Indicates the label information of a network resource. |
   +-----------+-----------+---------------------------------------------------------------------------------------------------+--------------------------------------------------------+

.. _en-us_topic_0000001943967217__request_networkmetadatalabels:

.. table:: **Table 4** NetworkMetadataLabels

   ================= ========= ====== =======================
   Parameter         Mandatory Type   Description
   ================= ========= ====== =======================
   os.modelarts/name Yes       String Specified network name.
   ================= ========= ====== =======================

.. _en-us_topic_0000001943967217__request_networkspec:

.. table:: **Table 5** NetworkSpec

   +-----------------+-----------------+-------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type                                                                                      | Description                                                                            |
   +=================+=================+===========================================================================================+========================================================================================+
   | cidr            | Yes             | String                                                                                    | Network CIDR. Value range:                                                             |
   |                 |                 |                                                                                           |                                                                                        |
   |                 |                 |                                                                                           | -  172.16.0.0/12-172.16.0.0/24                                                         |
   |                 |                 |                                                                                           |                                                                                        |
   |                 |                 |                                                                                           | -  192.168.0.0/16-192.168.0.0/24                                                       |
   +-----------------+-----------------+-------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | connection      | No              | :ref:`NetworkConnection <en-us_topic_0000001943967217__request_networkconnection>` object | Information about the connection between the current network and other cloud services. |
   +-----------------+-----------------+-------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------+

.. _en-us_topic_0000001943967217__request_networkconnection:

.. table:: **Table 6** NetworkConnection

   +------------------------+-----------+---------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | Parameter              | Mandatory | Type                                                                                                          | Description                                          |
   +========================+===========+===============================================================================================================+======================================================+
   | peerConnectionList     | No        | Array of :ref:`peerConnectionList <en-us_topic_0000001943967217__request_peerconnectionlist>` objects         | List of networks that can be connected in peer mode. |
   +------------------------+-----------+---------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | sfsTurboConnectionList | No        | Array of :ref:`sfsTurboConnectionList <en-us_topic_0000001943967217__request_sfsturboconnectionlist>` objects | Specifies the SFS Turbo list by attaching NICs.      |
   +------------------------+-----------+---------------------------------------------------------------------------------------------------------------+------------------------------------------------------+

.. _en-us_topic_0000001943967217__request_peerconnectionlist:

.. table:: **Table 7** peerConnectionList

   ============ ========= ====== =================================
   Parameter    Mandatory Type   Description
   ============ ========= ====== =================================
   peerVpcId    Yes       String Indicates the ID of the peer VPC.
   peerSubnetId Yes       String ID of the peer subnet.
   ============ ========= ====== =================================

.. _en-us_topic_0000001943967217__request_sfsturboconnectionlist:

.. table:: **Table 8** sfsTurboConnectionList

   ========= ========= ====== ==========================================
   Parameter Mandatory Type   Description
   ========= ========= ====== ==========================================
   sfsId     Yes       String Specifies the ID of an SFS Turbo instance.
   name      Yes       String Name of the sfsTurbo instance.
   ========= ========= ====== ==========================================

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 9** Response body parameters

   +-----------------------+--------------------------------------------------------------------------------------+-----------------------------------+
   | Parameter             | Type                                                                                 | Description                       |
   +=======================+======================================================================================+===================================+
   | apiVersion            | String                                                                               | API version. Options:             |
   |                       |                                                                                      |                                   |
   |                       |                                                                                      | -  **v1**                         |
   +-----------------------+--------------------------------------------------------------------------------------+-----------------------------------+
   | kind                  | String                                                                               | Resource type. Options:           |
   |                       |                                                                                      |                                   |
   |                       |                                                                                      | -  **Network**                    |
   +-----------------------+--------------------------------------------------------------------------------------+-----------------------------------+
   | metadata              | :ref:`NeworkMetadata <en-us_topic_0000001943967217__response_neworkmetadata>` object | Metadata of network resources.    |
   +-----------------------+--------------------------------------------------------------------------------------+-----------------------------------+
   | spec                  | :ref:`NetworkSpec <en-us_topic_0000001943967217__response_networkspec>` object       | Description of network resources. |
   +-----------------------+--------------------------------------------------------------------------------------+-----------------------------------+
   | status                | :ref:`NetworkStatus <en-us_topic_0000001943967217__response_networkstatus>` object   | Status of network resources.      |
   +-----------------------+--------------------------------------------------------------------------------------+-----------------------------------+

.. _en-us_topic_0000001943967217__response_neworkmetadata:

.. table:: **Table 10** NeworkMetadata

   +-------------------+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | Parameter         | Type                                                                                                         | Description                                                                 |
   +===================+==============================================================================================================+=============================================================================+
   | name              | String                                                                                                       | Automatically generated network name, which is equivalent to **networkId**. |
   +-------------------+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | creationTimestamp | String                                                                                                       | Timestamp, for example, 2021-11-01T03:49:41Z.                               |
   +-------------------+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | labels            | :ref:`NetworkMetadataLabels <en-us_topic_0000001943967217__response_networkmetadatalabels>` object           | Labels of network resources.                                                |
   +-------------------+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | annotations       | :ref:`NetworkMetadataAnnotations <en-us_topic_0000001943967217__response_networkmetadataannotations>` object | Annotations of network resources.                                           |
   +-------------------+--------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_networkmetadatalabels:

.. table:: **Table 11** NetworkMetadataLabels

   ================= ====== =======================
   Parameter         Type   Description
   ================= ====== =======================
   os.modelarts/name String Specified network name.
   ================= ====== =======================

.. _en-us_topic_0000001943967217__response_networkmetadataannotations:

.. table:: **Table 12** NetworkMetadataAnnotations

   +--------------------------+--------+-------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                | Type   | Description                                                                                                                   |
   +==========================+========+===============================================================================================================================+
   | os.modelarts/description | String | Network resource description, which is used to describe a scenario. The following special characters are not allowed: !<>=&"' |
   +--------------------------+--------+-------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_networkspec:

.. table:: **Table 13** NetworkSpec

   +-----------------------+--------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                       | Description                                                                            |
   +=======================+============================================================================================+========================================================================================+
   | cidr                  | String                                                                                     | Network CIDR. Value range:                                                             |
   |                       |                                                                                            |                                                                                        |
   |                       |                                                                                            | -  172.16.0.0/12-172.16.0.0/24                                                         |
   |                       |                                                                                            |                                                                                        |
   |                       |                                                                                            | -  192.168.0.0/16-192.168.0.0/24                                                       |
   +-----------------------+--------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------+
   | connection            | :ref:`NetworkConnection <en-us_topic_0000001943967217__response_networkconnection>` object | Information about the connection between the current network and other cloud services. |
   +-----------------------+--------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_networkconnection:

.. table:: **Table 14** NetworkConnection

   +------------------------+----------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | Parameter              | Type                                                                                                           | Description                                          |
   +========================+================================================================================================================+======================================================+
   | peerConnectionList     | Array of :ref:`peerConnectionList <en-us_topic_0000001943967217__response_peerconnectionlist>` objects         | List of networks that can be connected in peer mode. |
   +------------------------+----------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | sfsTurboConnectionList | Array of :ref:`sfsTurboConnectionList <en-us_topic_0000001943967217__response_sfsturboconnectionlist>` objects | Specifies the SFS Turbo list by attaching NICs.      |
   +------------------------+----------------------------------------------------------------------------------------------------------------+------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_peerconnectionlist:

.. table:: **Table 15** peerConnectionList

   ============ ====== =================================
   Parameter    Type   Description
   ============ ====== =================================
   peerVpcId    String Indicates the ID of the peer VPC.
   peerSubnetId String ID of the peer subnet.
   ============ ====== =================================

.. _en-us_topic_0000001943967217__response_sfsturboconnectionlist:

.. table:: **Table 16** sfsTurboConnectionList

   ========= ====== ==========================================
   Parameter Type   Description
   ========= ====== ==========================================
   sfsId     String Specifies the ID of an SFS Turbo instance.
   name      String Name of the sfsTurbo instance.
   ========= ====== ==========================================

.. _en-us_topic_0000001943967217__response_networkstatus:

.. table:: **Table 17** NetworkStatus

   +-----------------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                                   | Description                                                                   |
   +=======================+========================================================================================================+===============================================================================+
   | phase                 | String                                                                                                 | Current network status. Options:                                              |
   |                       |                                                                                                        |                                                                               |
   |                       |                                                                                                        | -  **Creating**: The network is being created.                                |
   |                       |                                                                                                        |                                                                               |
   |                       |                                                                                                        | -  **Active**: The network is functional.                                     |
   |                       |                                                                                                        |                                                                               |
   |                       |                                                                                                        | -  **Abnormal**: The network malfunctions.                                    |
   +-----------------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
   | connectionStatus      | :ref:`NetworkConnectionStatus <en-us_topic_0000001943967217__response_networkconnectionstatus>` object | Indicates the connection status between the network and other cloud services. |
   +-----------------------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_networkconnectionstatus:

.. table:: **Table 18** NetworkConnectionStatus

   +----------------------+------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------+
   | Parameter            | Type                                                                                                       | Description                                                            |
   +======================+============================================================================================================+========================================================================+
   | peerConnectionStatus | Array of :ref:`peerConnectionStatus <en-us_topic_0000001943967217__response_peerconnectionstatus>` objects | Indicates the status information list of the network in peer mode.     |
   +----------------------+------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------+
   | sfsTurboStatus       | Array of :ref:`sfsTurboStatus <en-us_topic_0000001943967217__response_sfsturbostatus>` objects             | Specifies the list of SFS Turbos that can be connected to the network. |
   +----------------------+------------------------------------------------------------------------------------------------------------+------------------------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_peerconnectionstatus:

.. table:: **Table 19** peerConnectionStatus

   +-----------------------+-----------------------+---------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                   |
   +=======================+=======================+===============================================================+
   | peerVpcId             | String                | Indicates the ID of the peer VPC.                             |
   +-----------------------+-----------------------+---------------------------------------------------------------+
   | peerSubnetId          | String                | ID of the peer subnet.                                        |
   +-----------------------+-----------------------+---------------------------------------------------------------+
   | phase                 | String                | Connection status of the network. The options are as follows: |
   |                       |                       |                                                               |
   |                       |                       | -  Connecting: The network is being connected.                |
   |                       |                       |                                                               |
   |                       |                       | -  Active: The network connection is normal.                  |
   |                       |                       |                                                               |
   |                       |                       | -  Abnormal: The network connection is abnormal.              |
   +-----------------------+-----------------------+---------------------------------------------------------------+

.. _en-us_topic_0000001943967217__response_sfsturbostatus:

.. table:: **Table 20** sfsTurboStatus

   +-----------------------+-----------------------+--------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                          |
   +=======================+=======================+======================================================================================+
   | sfsId                 | String                | Specifies the SFS Turbo ID.                                                          |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------+
   | name                  | String                | Specifies the name of the SFS Turbo.                                                 |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------+
   | status                | String                | Specifies the status of the connection to the SFS Turbo. The options are as follows: |
   |                       |                       |                                                                                      |
   |                       |                       | -  Active: The SFS connection status is normal.                                      |
   |                       |                       |                                                                                      |
   |                       |                       | -  Abnormal: The SFS connection status is abnormal.                                  |
   |                       |                       |                                                                                      |
   |                       |                       | -  Creating: The SFS connection status is being associated.                          |
   |                       |                       |                                                                                      |
   |                       |                       | -  Deleting: The SFS connection is being disassociated.                              |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------+
   | ipAddr                | String                | Specifies the address for accessing SFS Turbo.                                       |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------+
   | connectionType        | String                | Association mode. The options are as follows:                                        |
   |                       |                       |                                                                                      |
   |                       |                       | -  VpcPort: passthrough through the attached NIC                                     |
   |                       |                       |                                                                                      |
   |                       |                       | -  Peering: VPC peering connections are used.                                        |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------+

**Status code: 400**

.. table:: **Table 21** Response body parameters

   ========== ====== ==============
   Parameter  Type   Description
   ========== ====== ==============
   error_code String Error code.
   error_msg  String Error message.
   ========== ====== ==============

Example Requests
----------------

Create a network.

.. code-block:: text

   POST {endpoint}/v2/{project_id}/pools

   {
     "apiVersion" : "v1",
     "kind" : "Network",
     "metadata" : {
       "labels" : {
         "os.modelarts/name" : "network-7a03",
         "os.modelarts/workspace.id" : "0"
       }
     },
     "spec" : {
       "cidr" : "192.168.128.0/17"
     }
   }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "kind" : "Network",
     "apiVersion" : "v1",
     "metadata" : {
       "name" : "network-7a03-86c13962597848eeb29c5861153a391f",
       "creationTimestamp" : "2022-09-16T09:44:59Z",
       "labels" : {
         "os.modelarts/name" : "network-7a03",
         "os.modelarts/workspace.id" : "0"
       },
       "annotations" : { }
     },
     "spec" : {
       "cidr" : "192.168.128.0/17",
       "connection" : { }
     },
     "status" : {
       "phase" : ""
     }
   }

**Status code: 400**

Bad request.

.. code-block::

   {
     "error_code" : "ModelArts.50004000",
     "error_msg" : "Bad request."
   }

Status Codes
------------

=========== ============
Status Code Description
=========== ============
200         OK
400         Bad request.
=========== ============

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
