:original_name: ShowPoolRuntimeMetrics.html

.. _ShowPoolRuntimeMetrics:

Obtaining the Real-Time Resource Usage
======================================

Function
--------

This API is used to obtain the real-time usage of all resource pools in the current project.

URI
---

GET /v2/{project_id}/metrics/runtime/pools

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 2** Response body parameters

   +-----------------------+------------------------------------------------------------------------------------------+----------------------------+
   | Parameter             | Type                                                                                     | Description                |
   +=======================+==========================================================================================+============================+
   | apiVersion            | String                                                                                   | Resource version. Options: |
   |                       |                                                                                          |                            |
   |                       |                                                                                          | -  **v2**                  |
   +-----------------------+------------------------------------------------------------------------------------------+----------------------------+
   | kind                  | String                                                                                   | Resource type. Options:    |
   |                       |                                                                                          |                            |
   |                       |                                                                                          | -  **PoolMetricsList**     |
   +-----------------------+------------------------------------------------------------------------------------------+----------------------------+
   | items                 | Array of :ref:`MetricsItem <en-us_topic_0000002080257329__response_metricsitem>` objects | Metric list                |
   +-----------------------+------------------------------------------------------------------------------------------+----------------------------+

.. _en-us_topic_0000002080257329__response_metricsitem:

.. table:: **Table 3** MetricsItem

   +-----------+--------------------------------------------------------------------------------------------------------+------------------------------+
   | Parameter | Type                                                                                                   | Description                  |
   +===========+========================================================================================================+==============================+
   | table     | :ref:`table <en-us_topic_0000002080257329__response_table>` object                                     | Resource list                |
   +-----------+--------------------------------------------------------------------------------------------------------+------------------------------+
   | metadata  | :ref:`ResourceMetricsMetadata <en-us_topic_0000002080257329__response_resourcemetricsmetadata>` object | Metadata of resource metrics |
   +-----------+--------------------------------------------------------------------------------------------------------+------------------------------+

.. _en-us_topic_0000002080257329__response_table:

.. table:: **Table 4** table

   +-----------+----------------------------------------------------------------------------+-------------------------+
   | Parameter | Type                                                                       | Description             |
   +===========+============================================================================+=========================+
   | allocated | :ref:`Allocated <en-us_topic_0000002080257329__response_allocated>` object | Allocated resources     |
   +-----------+----------------------------------------------------------------------------+-------------------------+
   | capacity  | :ref:`Capacity <en-us_topic_0000002080257329__response_capacity>` object   | Total resource capacity |
   +-----------+----------------------------------------------------------------------------+-------------------------+

.. _en-us_topic_0000002080257329__response_allocated:

.. table:: **Table 5** Allocated

   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | Parameter | Type                                                               | Description                                                                                             |
   +===========+====================================================================+=========================================================================================================+
   | value     | :ref:`Value <en-us_topic_0000002080257329__response_value>` object | Resource amount                                                                                         |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | timestamp | String                                                             | UTC time, in the format of yyyy-MM-dd'T'HH:mm:ss'Z'                                                     |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | window    | String                                                             | Statistics interval. **1s** indicates 1 second, **1m** indicates 1 minute, and **1h** indicates 1 hour. |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080257329__response_capacity:

.. table:: **Table 6** Capacity

   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | Parameter | Type                                                               | Description                                                                                             |
   +===========+====================================================================+=========================================================================================================+
   | value     | :ref:`Value <en-us_topic_0000002080257329__response_value>` object | Resource amount                                                                                         |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | maxValue  | :ref:`Value <en-us_topic_0000002080257329__response_value>` object | Maximum number of elastic resources                                                                     |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | timestamp | String                                                             | UTC time, in the format of yyyy-MM-dd'T'HH:mm:ss'Z'                                                     |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+
   | window    | String                                                             | Statistics interval. **1s** indicates 1 second, **1m** indicates 1 minute, and **1h** indicates 1 hour. |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080257329__response_value:

.. table:: **Table 7** Value

   ============= ====== =================
   Parameter     Type   Description
   ============= ====== =================
   cpu           String Number of CPUs
   memory        String Memory
   nvidia.com/t4 String Number of T4 CPUs
   ============= ====== =================

.. _en-us_topic_0000002080257329__response_resourcemetricsmetadata:

.. table:: **Table 8** ResourceMetricsMetadata

   ========= ====== ===========================
   Parameter Type   Description
   ========= ====== ===========================
   name      String Name of a resource metric
   labels    Object Labels of a resource metric
   ========= ====== ===========================

Example Requests
----------------

Obtain the real-time resource usage of a resource pool.

.. code-block:: text

   GET https://{endpoint}/v2/{project_id}/metrics/runtime/pools

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "apiVersion" : "v2",
     "kind" : "PoolMetricsList",
     "items" : [ {
       "table" : {
         "allocated" : {
           "value" : {
             "cpu" : 5,
             "memory" : "15548Mi",
             "tnt004" : "1073m"
           },
           "timestamp" : "2022-03-30T07:09:10Z",
           "window" : "1m"
         },
         "capacity" : {
           "value" : {
             "cpu" : 16,
             "memory" : "64Gi",
             "tnt004" : 2
           },
           "maxValue" : {
             "cpu" : 16,
             "memory" : "64Gi",
             "tnt004" : 2
           },
           "timestamp" : "2022-03-30T07:09:10Z",
           "window" : "1m"
         }
       },
       "metadata" : {
         "name" : "hougang-rse-pool"
       }
     } ]
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
