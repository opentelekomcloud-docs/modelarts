:original_name: PatchPool.html

.. _PatchPool:

Updating a Resource Pool
========================

Function
--------

This API is used to update a specified resource pool.

URI
---

PATCH /v2/{project_id}/pools/{pool_name}

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | pool_name  | Yes       | String | Resource pool ID. The value is the **metadata.name** field in the resource pool details. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request header parameters

   ============ ========= ====== ===============================
   Parameter    Mandatory Type   Description
   ============ ========= ====== ===============================
   Content-Type Yes       String Application/merge-patch + JSON.
   ============ ========= ====== ===============================

.. table:: **Table 3** Request body parameters

   +-----------+-----------+---------------------------------------------------------------------------------------------+---------------------------------+
   | Parameter | Mandatory | Type                                                                                        | Description                     |
   +===========+===========+=============================================================================================+=================================+
   | metadata  | No        | :ref:`PoolMetadataUpdate <en-us_topic_0000002080295909__request_poolmetadataupdate>` object | Metadata of a resource pool.    |
   +-----------+-----------+---------------------------------------------------------------------------------------------+---------------------------------+
   | spec      | No        | :ref:`PoolSpecUpdate <en-us_topic_0000002080295909__request_poolspecupdate>` object         | Description of a resource pool. |
   +-----------+-----------+---------------------------------------------------------------------------------------------+---------------------------------+

.. _en-us_topic_0000002080295909__request_poolmetadataupdate:

.. table:: **Table 4** PoolMetadataUpdate

   +-------------+-----------+---------------------------------------------------------------------------------------------------+----------------------------+
   | Parameter   | Mandatory | Type                                                                                              | Description                |
   +=============+===========+===================================================================================================+============================+
   | labels      | No        | :ref:`PoolLabelsUpdate <en-us_topic_0000002080295909__request_poollabelsupdate>` object           | Resource pool labels       |
   +-------------+-----------+---------------------------------------------------------------------------------------------------+----------------------------+
   | annotations | No        | :ref:`PoolAnnotationsUpdate <en-us_topic_0000002080295909__request_poolannotationsupdate>` object | Resource pool annotations. |
   +-------------+-----------+---------------------------------------------------------------------------------------------------+----------------------------+

.. _en-us_topic_0000002080295909__request_poollabelsupdate:

.. table:: **Table 5** PoolLabelsUpdate

   +---------------------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                 | Mandatory       | Type            | Description                                                                                                                                |
   +===========================+=================+=================+============================================================================================================================================+
   | os.modelarts/workspace.id | No              | String          | Target workspace ID. The workspace ID cannot be changed at the same time as other resource pool modification operations (such as scaling). |
   +---------------------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/sharing      | No              | String          | Whether the resource pool can be shared. The options are as follows:                                                                       |
   |                           |                 |                 |                                                                                                                                            |
   |                           |                 |                 | -  **unshared**: It cannot be shared.                                                                                                      |
   |                           |                 |                 |                                                                                                                                            |
   |                           |                 |                 | -  **shared**: It can be shared.                                                                                                           |
   +---------------------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__request_poolannotationsupdate:

.. table:: **Table 6** PoolAnnotationsUpdate

   +----------------------------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                        | Mandatory | Type   | Description                                                                                                                                               |
   +==================================+===========+========+===========================================================================================================================================================+
   | os.modelarts/description         | No        | String | Description of a resource pool, specifying the application scenarios of the resource pool. The following special characters are not allowed: ``!<>=&"'.`` |
   +----------------------------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/scheduler.extension | No        | String | Priority that can be set for the jobs delivered by other users to the shared resource pool                                                                |
   +----------------------------------+-----------+--------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__request_poolspecupdate:

.. table:: **Table 7** PoolSpecUpdate

   +-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type                                                                                                            | Description                                                             |
   +=================+=================+=================================================================================================================+=========================================================================+
   | scope           | No              | Array of strings                                                                                                | Job type enabled, which cannot be specified for logical pools. Options: |
   |                 |                 |                                                                                                                 |                                                                         |
   |                 |                 |                                                                                                                 | -  **Train**: training jobs                                             |
   |                 |                 |                                                                                                                 |                                                                         |
   |                 |                 |                                                                                                                 | -  **Infer**: inference jobs [- **Notebook**: notebook jobs](tags: hc)  |
   |                 |                 |                                                                                                                 |                                                                         |
   |                 |                 |                                                                                                                 | Enumeration values:                                                     |
   |                 |                 |                                                                                                                 |                                                                         |
   |                 |                 |                                                                                                                 | -  **Train**                                                            |
   |                 |                 |                                                                                                                 |                                                                         |
   |                 |                 |                                                                                                                 | -  **Infer**                                                            |
   |                 |                 |                                                                                                                 |                                                                         |
   |                 |                 |                                                                                                                 | -  **Notebook**                                                         |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+
   | resources       | No              | Array of :ref:`PoolResourceFlavorCount <en-us_topic_0000002080295909__request_poolresourceflavorcount>` objects | Data model for the number of resources of the specified specifications  |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+
   | driver          | No              | :ref:`PoolDriver <en-us_topic_0000002080295909__request_pooldriver>` object                                     | Resource pool driver, which cannot be specified for logical pools.      |
   +-----------------+-----------------+-----------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__request_poolresourceflavorcount:

.. table:: **Table 8** PoolResourceFlavorCount

   +--------------+-----------+---------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter    | Mandatory | Type                                                                                  | Description                                                                                                                                                                                  |
   +==============+===========+=======================================================================================+==============================================================================================================================================================================================+
   | flavor       | Yes       | String                                                                                | Resource specifications name, for example, **modelarts.vm.gpu.t4u8**                                                                                                                         |
   +--------------+-----------+---------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | count        | Yes       | Integer                                                                               | Minimum count for the specifications in a resource pool                                                                                                                                      |
   +--------------+-----------+---------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | maxCount     | Yes       | Integer                                                                               | Elastic usage of the resource specifications. This parameter value is the same the **count** value in a physical pool; It is greater than or equal to the **count** value in a logical pool. |
   +--------------+-----------+---------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | extendParams | No        | Map<String,String>                                                                    | Custom configuration, for example, setting **dockerSize** to **"extendParams": {"dockerBaseSize": "100" }**                                                                                  |
   +--------------+-----------+---------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | azs          | No        | Array of :ref:`PoolNodeAz <en-us_topic_0000002080295909__request_poolnodeaz>` objects | AZ where resource pool nodes are deployed.                                                                                                                                                   |
   +--------------+-----------+---------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__request_poolnodeaz:

.. table:: **Table 9** PoolNodeAz

   +-----------------+-----------------+-----------------+---------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                   |
   +=================+=================+=================+===============================================================+
   | az              | Yes             | String          | AZ name.                                                      |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------+
   | count           | Yes             | Integer         | Number of nodes for expanding the capacity of a specified AZ. |
   |                 |                 |                 |                                                               |
   |                 |                 |                 | Minimum: **1**                                                |
   |                 |                 |                 |                                                               |
   |                 |                 |                 | Maximum: **2000**                                             |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------+

.. _en-us_topic_0000002080295909__request_pooldriver:

.. table:: **Table 10** PoolDriver

   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                |
   +=================+=================+=================+============================================================================================================================================================+
   | gpuVersion      | No              | String          | GPU driver version. This parameter is available when GPUs are used in a physical resource pool. For example, the GPU driver version is **440.33**.         |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | npuVersion      | No              | String          | NPU driver version. This parameter is available when Ascend chips are used in a physical resource pool. For example, the Ascend driver version is **C78**. |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updateStrategy  | No              | String          | Driver upgrade policy. Options:                                                                                                                            |
   |                 |                 |                 |                                                                                                                                                            |
   |                 |                 |                 | -  **force**: forcible upgrade. The node drivers are upgraded immediately, which may affect jobs running on the node.                                      |
   |                 |                 |                 |                                                                                                                                                            |
   |                 |                 |                 | -  **idle**: secure upgrade. The drivers are upgraded when no job is running on the node.                                                                  |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 19** Response body parameters

   +-----------------------+----------------------------------------------------------------------------------+---------------------------------+
   | Parameter             | Type                                                                             | Description                     |
   +=======================+==================================================================================+=================================+
   | apiVersion            | String                                                                           | API version. Options:           |
   |                       |                                                                                  |                                 |
   |                       |                                                                                  | -  **v2**                       |
   +-----------------------+----------------------------------------------------------------------------------+---------------------------------+
   | kind                  | String                                                                           | Resource type. Options:         |
   |                       |                                                                                  |                                 |
   |                       |                                                                                  | -  **Pool**: resource pool      |
   +-----------------------+----------------------------------------------------------------------------------+---------------------------------+
   | metadata              | :ref:`PoolMetadata <en-us_topic_0000002080295909__response_poolmetadata>` object | Metadata of a resource pool.    |
   +-----------------------+----------------------------------------------------------------------------------+---------------------------------+
   | spec                  | :ref:`PoolSpec <en-us_topic_0000002080295909__response_poolspec>` object         | Description of a resource pool. |
   +-----------------------+----------------------------------------------------------------------------------+---------------------------------+
   | status                | :ref:`PoolStatus <en-us_topic_0000002080295909__response_poolstatus>` object     | Status of a resource pool.      |
   +-----------------------+----------------------------------------------------------------------------------+---------------------------------+

.. _en-us_topic_0000002080295909__response_poolmetadata:

.. table:: **Table 12** PoolMetadata

   +-----------------------+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                           | Description                                                                     |
   +=======================+================================================================================================+=================================================================================+
   | name                  | String                                                                                         | Automatically generated resource pool name, which is equivalent to **pool ID**. |
   |                       |                                                                                                |                                                                                 |
   |                       |                                                                                                | Minimum: **4**                                                                  |
   |                       |                                                                                                |                                                                                 |
   |                       |                                                                                                | Maximum: **128**                                                                |
   +-----------------------+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------+
   | creationTimestamp     | String                                                                                         | Timestamp, for example, 2021-11-01T03:49:41Z.                                   |
   +-----------------------+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------+
   | labels                | :ref:`PoolMetaLabels <en-us_topic_0000002080295909__response_poolmetalabels>` object           | Resource pool labels.                                                           |
   +-----------------------+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------+
   | annotations           | :ref:`PoolMetaAnnotations <en-us_topic_0000002080295909__response_poolmetaannotations>` object | Resource pool annotations.                                                      |
   +-----------------------+------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolmetalabels:

.. table:: **Table 13** PoolMetaLabels

   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                     | Type                  | Description                                                                                                                                           |
   +===============================+=======================+=======================================================================================================================================================+
   | os.modelarts/workspace.id     | String                | Workspace ID                                                                                                                                          |
   |                               |                       |                                                                                                                                                       |
   |                               |                       | Default: **0**                                                                                                                                        |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/name             | String                | Specified resource pool name.                                                                                                                         |
   |                               |                       |                                                                                                                                                       |
   |                               |                       | Minimum: **4**                                                                                                                                        |
   |                               |                       |                                                                                                                                                       |
   |                               |                       | Maximum: **64**                                                                                                                                       |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/resource.id      | String                | Resource ID, which is typically provided for CBC.                                                                                                     |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/tenant.domain.id | String                | ID of the tenant corresponding to the resource pool, which records the tenant account where the resource pool is created                              |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/create-from      | String                | Source of a resource pool, for example, **admin-console**, indicating that the resource pool is created by the administrator on the ModelArts console |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts.pool/biz         | String                | Business type of a resource pool. The value can be **public** or **private**.                                                                         |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | os.modelarts/sharing          | String                | Whether the resource pool can be shared. Options:                                                                                                     |
   |                               |                       |                                                                                                                                                       |
   |                               |                       | -  **unshared**: It cannot be shared.                                                                                                                 |
   |                               |                       |                                                                                                                                                       |
   |                               |                       | -  **shared**: It can be shared.                                                                                                                      |
   +-------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolmetaannotations:

.. table:: **Table 14** PoolMetaAnnotations

   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | Parameter                        | Type                  | Description                                                                                                 |
   +==================================+=======================+=============================================================================================================+
   | os.modelarts/description         | String                | Description of a resource pool.                                                                             |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/billing.mode        | String                | Billing mode. Options:                                                                                      |
   |                                  |                       |                                                                                                             |
   |                                  |                       | -  **0**: pay-per-use                                                                                       |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/auto.renew          | String                | Whether to automatically renew the subscription. Options:                                                   |
   |                                  |                       |                                                                                                             |
   |                                  |                       | -  **0**: auto-renewal disabled (default value)                                                             |
   |                                  |                       |                                                                                                             |
   |                                  |                       | -  **1**: auto-renewal enabled                                                                              |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/promotion.info      | String                | Discount selected in CBC.                                                                                   |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/service.console.url | String                | URL of the page displayed after the subscription order is paid.                                             |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/flavor.resource.ids | String                | Resource ID corresponding to each specification, which is used for interaction with the operations platform |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/tms.tags            | String                | Resource tags specified by the user during creation                                                         |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts/scheduler.extension | String                | Priority that can be set for the jobs delivered by other users to the shared resource pool                  |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+
   | os.modelarts.pool/subpools.count | String                | Number of logical sub-pools in a resource pool                                                              |
   +----------------------------------+-----------------------+-------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolspec:

.. table:: **Table 15** PoolSpec

   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                                             | Description                                                                                                                                      |
   +=======================+==================================================================================================================+==================================================================================================================================================+
   | type                  | String                                                                                                           | Resource pool type. The options are as follows:                                                                                                  |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Dedicate**: physical resource pool, which uses a separate network and supports network connection, custom drivers, and custom job types.    |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Logical**: logical resource pool. After a logical pool is created, contact the administrator for approval.                                  |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | scope                 | Array of strings                                                                                                 | Job type enabled, which cannot be specified for logical pools. Options:                                                                          |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Train**: training jobs                                                                                                                      |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Infer**: inference jobs [- **Notebook**: notebook jobs](tags: hc)                                                                           |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | Enumeration values:                                                                                                                              |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Train**                                                                                                                                     |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Infer**                                                                                                                                     |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **Notebook**                                                                                                                                  |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | resources             | Array of :ref:`PoolResourceFlavorCount <en-us_topic_0000002080295909__response_poolresourceflavorcount>` objects | Resource specifications in a resource pool, including resource specifications and the number of resources for each specification.                |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | network               | :ref:`PoolNetwork <en-us_topic_0000002080295909__response_poolnetwork>` object                                   | Network settings for a resource pool. This parameter is mandatory for physical resource pools and is unavailable for logical resource pools.     |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | containerNetwork      | :ref:`PoolClusterContainerNetwork <en-us_topic_0000002080295909__response_poolclustercontainernetwork>` object   | Kubernetes container network                                                                                                                     |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | kubernetesSvcIpRange  | String                                                                                                           | CIDR of the Kubernetes service network segment                                                                                                   |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | masters               | Array of :ref:`PoolClusterMaster <en-us_topic_0000002080295909__response_poolclustermaster>` objects             | Master node parameters in a resource pool. This parameter is optional for physical resource pools and is unavailable for logical resource pools. |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | driver                | :ref:`PoolDriver <en-us_topic_0000002080295909__response_pooldriver>` object                                     | Resource pool driver.                                                                                                                            |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | userLogin             | :ref:`PoolUserLogin <en-us_topic_0000002080295909__response_pooluserlogin>` object                               | Node login information of a privilege pool                                                                                                       |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | clusters              | Array of :ref:`PoolClusterInfo <en-us_topic_0000002080295909__response_poolclusterinfo>` objects                 | Privilege pool cluster information                                                                                                               |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | ipv6enable            | Boolean                                                                                                          | Whether to enable IPv6                                                                                                                           |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+
   | controlMode           | Integer                                                                                                          | Restriction status of a resource pool. Options:                                                                                                  |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **0**: The resource pool is not restricted.                                                                                                   |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **2**: Modifying specifications is restricted.                                                                                                |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **4**: The service is restricted.                                                                                                             |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **8**: The resource pool is frozen.                                                                                                           |
   |                       |                                                                                                                  |                                                                                                                                                  |
   |                       |                                                                                                                  | -  **16**: The resource pool is frozen by the public security department (cannot be unsubscribed). In addition, multiple statuses are allowed.   |
   +-----------------------+------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolresourceflavorcount:

.. table:: **Table 16** PoolResourceFlavorCount

   +--------------+----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter    | Type                                                                                   | Description                                                                                                                                                                                  |
   +==============+========================================================================================+==============================================================================================================================================================================================+
   | flavor       | String                                                                                 | Resource specifications name, for example, **modelarts.vm.gpu.t4u8**                                                                                                                         |
   +--------------+----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | count        | Integer                                                                                | Minimum count for the specifications in a resource pool                                                                                                                                      |
   +--------------+----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | maxCount     | Integer                                                                                | Elastic usage of the resource specifications. This parameter value is the same the **count** value in a physical pool; It is greater than or equal to the **count** value in a logical pool. |
   +--------------+----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | extendParams | Map<String,String>                                                                     | Custom configuration, for example, setting **dockerSize** to **"extendParams": {"dockerBaseSize": "100" }**                                                                                  |
   +--------------+----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | azs          | Array of :ref:`PoolNodeAz <en-us_topic_0000002080295909__response_poolnodeaz>` objects | AZ where resource pool nodes are deployed.                                                                                                                                                   |
   +--------------+----------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolnetwork:

.. table:: **Table 17** PoolNetwork

   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                     |
   +=======================+=======================+=================================================================================================================================================================+
   | name                  | String                | Network name. When you create a network with a specified name, the system will automatically create subnets for you. By default, the first subnet will be used. |
   |                       |                       |                                                                                                                                                                 |
   |                       |                       | Minimum: **4**                                                                                                                                                  |
   |                       |                       |                                                                                                                                                                 |
   |                       |                       | Maximum: **128**                                                                                                                                                |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpcId                 | String                | VPC ID, which must be specified when a privileged pool is created and is unavailable for a non-privileged pool                                                  |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | subnetId              | String                | Subnet ID, which must be specified when a privileged pool is created and is unavailable for a non-privileged pool                                               |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolclustercontainernetwork:

.. table:: **Table 18** PoolClusterContainerNetwork

   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                       |
   +=======================+=======================+===================================================================================================================================+
   | mode                  | String                | Container network model                                                                                                           |
   |                       |                       |                                                                                                                                   |
   |                       |                       | Enumeration values:                                                                                                               |
   |                       |                       |                                                                                                                                   |
   |                       |                       | -  **overlay_l2**                                                                                                                 |
   |                       |                       |                                                                                                                                   |
   |                       |                       | -  **vpc-router**                                                                                                                 |
   |                       |                       |                                                                                                                                   |
   |                       |                       | -  **eni**                                                                                                                        |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------+
   | cidr                  | String                | Container network segment. This parameter is available only when the container network model is **overlay_l2** or **vpc-router**. |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolclustermaster:

.. table:: **Table 19** PoolClusterMaster

   ========= ====== ===================================
   Parameter Type   Description
   ========= ====== ===================================
   az        String AZ where the master node is located
   ========= ====== ===================================

.. _en-us_topic_0000002080295909__response_pooldriver:

.. table:: **Table 20** PoolDriver

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                |
   +=======================+=======================+============================================================================================================================================================+
   | gpuVersion            | String                | GPU driver version. This parameter is available when GPUs are used in a physical resource pool. For example, the GPU driver version is **440.33**.         |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | npuVersion            | String                | NPU driver version. This parameter is available when Ascend chips are used in a physical resource pool. For example, the Ascend driver version is **C78**. |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updateStrategy        | String                | Driver upgrade policy. Options:                                                                                                                            |
   |                       |                       |                                                                                                                                                            |
   |                       |                       | -  **force**: forcible upgrade. The node drivers are upgraded immediately, which may affect jobs running on the node.                                      |
   |                       |                       |                                                                                                                                                            |
   |                       |                       | -  **idle**: secure upgrade. The drivers are upgraded when no job is running on the node.                                                                  |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_pooluserlogin:

.. table:: **Table 21** PoolUserLogin

   +-------------+--------+--------------------------------------------------------------------------------------------------------+
   | Parameter   | Type   | Description                                                                                            |
   +=============+========+========================================================================================================+
   | keyPairName | String | Key pair name                                                                                          |
   +-------------+--------+--------------------------------------------------------------------------------------------------------+
   | password    | String | Password, which must be salted, encrypted, and encoded using Base64. The default username is **root**. |
   +-------------+--------+--------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolstatus:

.. table:: **Table 22** PoolStatus

   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                             | Description                                                                                                                 |
   +=======================+==================================================================================================+=============================================================================================================================+
   | phase                 | String                                                                                           | Resource pool status. Options:                                                                                              |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **Creating**: The resource pool is being created.                                                                        |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **Running**: The resource pool is running.                                                                               |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **Abnormal**: The resource pool malfunctions.                                                                            |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **Deleting**: The resource pool is being deleted.                                                                        |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **Error**: An error occurred in the resource pool.                                                                       |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **CreationFailed**: Creating the resource pool failed.                                                                   |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **ScalingFailed**: Expanding the capacity of the resource pool failed.                                                   |
   |                       |                                                                                                  |                                                                                                                             |
   |                       |                                                                                                  | -  **Waiting**: The resource pool is awaiting creation, which is typically caused by an unpaid order or unapproved request. |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | message               | String                                                                                           | Message indicating that the resource pool is in the current state.                                                          |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | resources             | :ref:`resources <en-us_topic_0000002080295909__response_resources>` object                       | Left blank for logical pools, which do not need to be created.                                                              |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | scope                 | Array of :ref:`scope <en-us_topic_0000002080295909__response_scope>` objects                     | Service status of a resource pool.                                                                                          |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | driver                | :ref:`driver <en-us_topic_0000002080295909__response_driver>` object                             | Resource pool driver.                                                                                                       |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | parent                | String                                                                                           | Name of the parent node of a resource pool. This parameter is left blank for physical pools.                                |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | root                  | String                                                                                           | Name of the root node in a resource pool. For a physical pool, the value is its name.                                       |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+
   | clusters              | Array of :ref:`PoolClusterInfo <en-us_topic_0000002080295909__response_poolclusterinfo>` objects | Resource pool cluster information. This parameter is available only for privileged pools.                                   |
   +-----------------------+--------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_resources:

.. table:: **Table 23** resources

   +-----------+--------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | Parameter | Type                                                                                                   | Description                                 |
   +===========+========================================================================================================+=============================================+
   | creating  | :ref:`PoolResourceFlavorCount <en-us_topic_0000002080295909__response_poolresourceflavorcount>` object | Number of resources that are being created. |
   +-----------+--------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | available | :ref:`PoolResourceFlavorCount <en-us_topic_0000002080295909__response_poolresourceflavorcount>` object | Number of available resources.              |
   +-----------+--------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | abnormal  | :ref:`PoolResourceFlavorCount <en-us_topic_0000002080295909__response_poolresourceflavorcount>` object | Number of unavailable resources.            |
   +-----------+--------------------------------------------------------------------------------------------------------+---------------------------------------------+
   | deleting  | :ref:`PoolResourceFlavorCount <en-us_topic_0000002080295909__response_poolresourceflavorcount>` object | Number of resources that are being deleted. |
   +-----------+--------------------------------------------------------------------------------------------------------+---------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolnodeaz:

.. table:: **Table 24** PoolNodeAz

   +-----------------------+-----------------------+---------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                   |
   +=======================+=======================+===============================================================+
   | az                    | String                | AZ name.                                                      |
   +-----------------------+-----------------------+---------------------------------------------------------------+
   | count                 | Integer               | Number of nodes for expanding the capacity of a specified AZ. |
   |                       |                       |                                                               |
   |                       |                       | Minimum: **1**                                                |
   |                       |                       |                                                               |
   |                       |                       | Maximum: **2000**                                             |
   +-----------------------+-----------------------+---------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_scope:

.. table:: **Table 25** scope

   +-----------------------+-----------------------+-------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                             |
   +=======================+=======================+=========================================================================+
   | scopeType             | String                | Job type enabled, which cannot be specified for logical pools. Options: |
   |                       |                       |                                                                         |
   |                       |                       | -  **Train**: training jobs                                             |
   |                       |                       |                                                                         |
   |                       |                       | -  **Infer**: inference jobs [- **Notebook**: notebook jobs](tags: hc)  |
   |                       |                       |                                                                         |
   |                       |                       | Enumeration values:                                                     |
   |                       |                       |                                                                         |
   |                       |                       | -  **Train**                                                            |
   |                       |                       |                                                                         |
   |                       |                       | -  **Infer**                                                            |
   |                       |                       |                                                                         |
   |                       |                       | -  **Notebook**                                                         |
   +-----------------------+-----------------------+-------------------------------------------------------------------------+
   | state                 | String                | Service status. Options:                                                |
   |                       |                       |                                                                         |
   |                       |                       | -  **Enabling**: The service is being enabled.                          |
   |                       |                       |                                                                         |
   |                       |                       | -  **Enabled**: The service is enabled.                                 |
   |                       |                       |                                                                         |
   |                       |                       | -  **Disabling**: The service is being disabled.                        |
   |                       |                       |                                                                         |
   |                       |                       | -  **Disabled**: The service is disabled.                               |
   +-----------------------+-----------------------+-------------------------------------------------------------------------+

.. _en-us_topic_0000002080295909__response_driver:

.. table:: **Table 26** driver

   +-----------+------------------------------------------------------------------------------------------+-------------+
   | Parameter | Type                                                                                     | Description |
   +===========+==========================================================================================+=============+
   | gpu       | :ref:`PoolDriverStatus <en-us_topic_0000002080295909__response_pooldriverstatus>` object | GPU driver. |
   +-----------+------------------------------------------------------------------------------------------+-------------+
   | npu       | :ref:`PoolDriverStatus <en-us_topic_0000002080295909__response_pooldriverstatus>` object | NPU driver. |
   +-----------+------------------------------------------------------------------------------------------+-------------+

.. _en-us_topic_0000002080295909__response_pooldriverstatus:

.. table:: **Table 27** PoolDriverStatus

   +-----------------------+-----------------------+-------------------------------------------------+
   | Parameter             | Type                  | Description                                     |
   +=======================+=======================+=================================================+
   | version               | String                | Driver version                                  |
   +-----------------------+-----------------------+-------------------------------------------------+
   | state                 | String                | Driver status. Options:                         |
   |                       |                       |                                                 |
   |                       |                       | -  **Creating**: The driver is being created.   |
   |                       |                       |                                                 |
   |                       |                       | -  **Upgrading**: The driver is being upgraded. |
   |                       |                       |                                                 |
   |                       |                       | -  **Running**: The driver is running.          |
   |                       |                       |                                                 |
   |                       |                       | -  **Abnormal**: The driver malfunctions.       |
   +-----------------------+-----------------------+-------------------------------------------------+

.. _en-us_topic_0000002080295909__response_poolclusterinfo:

.. table:: **Table 28** PoolClusterInfo

   ========== ====== ============
   Parameter  Type   Description
   ========== ====== ============
   name       String Cluster name
   providerId String Cluster ID
   ========== ====== ============

**Status code: 400**

.. table:: **Table 29** Response body parameters

   ========== ====== ==============
   Parameter  Type   Description
   ========== ====== ==============
   error_code String Error code.
   error_msg  String Error message.
   ========== ====== ==============

**Status code: 404**

.. table:: **Table 46** Response body parameters

   ========== ====== ==============
   Parameter  Type   Description
   ========== ====== ==============
   error_code String Error code.
   error_msg  String Error message.
   ========== ====== ==============

Example Requests
----------------

Expand the capacity of a resource pool.

.. code-block::

   PATCH https://{endpoint}/v2/{project_id}/pools/{pool_name}

   {
     "spec" : {
       "resources" : [ {
         "flavor" : "modelarts.vm.cpu.4ud",
         "count" : 3
       } ]
     }
   }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "kind" : "Pool",
     "apiVersion" : "v2",
     "metadata" : {
       "name" : "auto-pool-os-86c13962597848eeb29c5861153a391f",
       "creationTimestamp" : "2022-09-16T03:10:40Z",
       "labels" : {
         "os.modelarts/name" : "auto-pool-os",
         "os.modelarts/resource.id" : "maos-auto-pool-os-72w8d"
       },
       "annotations" : {
         "os.modelarts/description" : "",
         "os.modelarts/billing.mode" : "0"
       }
     },
     "spec" : {
       "type" : "Dedicate",
       "scope" : [ "Train", "Infer" ],
       "resources" : [ {
         "flavor" : "modelarts.vm.cpu.4ud",
         "count" : 3
       } ],
       "network" : {
         "name" : "network-maos-86c13962597848eeb29c5861153a391f"
       }
     },
     "status" : {
       "phase" : "Running",
       "root" : "auto-pool-os-86c13962597848eeb29c5861153a391f",
       "scope" : [ {
         "scopeType" : "Train",
         "state" : "Enabled"
       }, {
         "scopeType" : "Infer",
         "state" : "Enabled"
       } ],
       "resources" : {
         "creating" : [ {
           "flavor" : "modelarts.vm.cpu.4ud",
           "count" : 1,
           "azs" : [ {
             "az" : "az-7c",
             "count" : 1
           } ]
         } ],
         "available" : [ {
           "flavor" : "modelarts.vm.cpu.4ud",
           "count" : 2,
           "azs" : [ {
             "az" : "az-7c",
             "count" : 2
           } ]
         } ]
       }
     }
   }

**Status code: 400**

Bad request

.. code-block::

   {
     "error_code" : "ModelArts.50004000",
     "error_msg" : "Bad request"
   }

**Status code: 404**

Not found.

.. code-block::

   {
     "error_code" : "ModelArts.50015001",
     "error_msg" : "pool not found"
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
400         Bad request
404         Not found.
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
