:original_name: ListPoolNodes.html

.. _ListPoolNodes:

Obtaining Nodes
===============

Function
--------

This API is used to obtain nodes in a resource pool.

Debugging
---------

You can debug this API through automatic authentication in or use the SDK sample code generated by API Explorer.

URI
---

GET /v2/{project_id}/pools/{pool_name}/nodes

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | pool_name  | Yes       | String | Name of a resource pool.                                                                 |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

.. table:: **Table 2** Query Parameters

   +-----------+-----------+---------+-----------------------------------------------------------+
   | Parameter | Mandatory | Type    | Description                                               |
   +===========+===========+=========+===========================================================+
   | continue  | No        | String  | Previous query location in pagination query.              |
   +-----------+-----------+---------+-----------------------------------------------------------+
   | limit     | No        | Integer | Number of records returned for a single pagination query. |
   +-----------+-----------+---------+-----------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------------------+------------------------------------------------------------------------------------------+-------------------------+
   | Parameter             | Type                                                                                     | Description             |
   +=======================+==========================================================================================+=========================+
   | apiVersion            | String                                                                                   | API version. Options:   |
   |                       |                                                                                          |                         |
   |                       |                                                                                          | -  **v2**               |
   +-----------------------+------------------------------------------------------------------------------------------+-------------------------+
   | kind                  | String                                                                                   | Resource type. Options: |
   |                       |                                                                                          |                         |
   |                       |                                                                                          | -  **NodeList**: nodes  |
   +-----------------------+------------------------------------------------------------------------------------------+-------------------------+
   | metadata              | :ref:`NodeListMetadata <en-us_topic_0000001910008036__response_nodelistmetadata>` object | Metadata of resources.  |
   +-----------------------+------------------------------------------------------------------------------------------+-------------------------+
   | items                 | Array of :ref:`Node <en-us_topic_0000001910008036__response_node>` objects               | Nodes.                  |
   +-----------------------+------------------------------------------------------------------------------------------+-------------------------+

.. _en-us_topic_0000001910008036__response_nodelistmetadata:

.. table:: **Table 4** NodeListMetadata

   ================== ====== ============================================
   Parameter          Type   Description
   ================== ====== ============================================
   continue           String Next query position during pagination query.
   remainingItemCount Long   Number of remaining resources.
   ================== ====== ============================================

.. _en-us_topic_0000001910008036__response_node:

.. table:: **Table 5** Node

   +-----------------------+------------------------------------------------------------------------------+------------------------------------------+
   | Parameter             | Type                                                                         | Description                              |
   +=======================+==============================================================================+==========================================+
   | apiVersion            | String                                                                       | API version. Options:                    |
   |                       |                                                                              |                                          |
   |                       |                                                                              | -  **v2**                                |
   +-----------------------+------------------------------------------------------------------------------+------------------------------------------+
   | kind                  | String                                                                       | Resource type. Options:                  |
   |                       |                                                                              |                                          |
   |                       |                                                                              | -  **Node**: node                        |
   +-----------------------+------------------------------------------------------------------------------+------------------------------------------+
   | metadata              | :ref:`metadata <en-us_topic_0000001910008036__response_metadata>` object     | Specifies the node metadata information. |
   +-----------------------+------------------------------------------------------------------------------+------------------------------------------+
   | spec                  | :ref:`NodeSpec <en-us_topic_0000001910008036__response_nodespec>` object     | Expected node information.               |
   +-----------------------+------------------------------------------------------------------------------+------------------------------------------+
   | status                | :ref:`NodeStatus <en-us_topic_0000001910008036__response_nodestatus>` object | Node status.                             |
   +-----------------------+------------------------------------------------------------------------------+------------------------------------------+

.. _en-us_topic_0000001910008036__response_metadata:

.. table:: **Table 6** metadata

   ================= ====== ==============
   Parameter         Type   Description
   ================= ====== ==============
   name              String Node name.
   creationTimestamp String Creation time.
   ================= ====== ==============

.. _en-us_topic_0000001910008036__response_nodespec:

.. table:: **Table 7** NodeSpec

   ========= ====== ===================
   Parameter Type   Description
   ========= ====== ===================
   flavor    String Node specifications
   ========= ====== ===================

.. _en-us_topic_0000001910008036__response_nodestatus:

.. table:: **Table 8** NodeStatus

   +-----------------------+----------------------------------------------------------------------------------+-------------------------------------------------------+
   | Parameter             | Type                                                                             | Description                                           |
   +=======================+==================================================================================+=======================================================+
   | phase                 | String                                                                           | Current status of a node. The options are as follows: |
   |                       |                                                                                  |                                                       |
   |                       |                                                                                  | -  Available: The node is available.                  |
   |                       |                                                                                  |                                                       |
   |                       |                                                                                  | -  Creating: The node is being created.               |
   |                       |                                                                                  |                                                       |
   |                       |                                                                                  | -  Deleting: The node is being deleted.               |
   |                       |                                                                                  |                                                       |
   |                       |                                                                                  | -  Abnormal: The node is abnormal.                    |
   +-----------------------+----------------------------------------------------------------------------------+-------------------------------------------------------+
   | az                    | String                                                                           | AZ that the node belongs to.                          |
   +-----------------------+----------------------------------------------------------------------------------+-------------------------------------------------------+
   | privateIp             | String                                                                           | Node IP address                                       |
   +-----------------------+----------------------------------------------------------------------------------+-------------------------------------------------------+
   | resources             | :ref:`NodeResource <en-us_topic_0000001910008036__response_noderesource>` object | Node resource information.                            |
   +-----------------------+----------------------------------------------------------------------------------+-------------------------------------------------------+
   | availableResources    | :ref:`NodeResource <en-us_topic_0000001910008036__response_noderesource>` object | Available resources of a node.                        |
   +-----------------------+----------------------------------------------------------------------------------+-------------------------------------------------------+

.. _en-us_topic_0000001910008036__response_noderesource:

.. table:: **Table 9** NodeResource

   ============== ====== =========================================
   Parameter      Type   Description
   ============== ====== =========================================
   cpu            String Number of CPU resources.
   memory         String Indicates the amount of memory resources.
   nvidia.com/gpu String Number of GPU resources on a GPU node.
   ============== ====== =========================================

**Status code: 404**

.. table:: **Table 10** Response body parameters

   ========== ====== ==============
   Parameter  Type   Description
   ========== ====== ==============
   error_code String Error code.
   error_msg  String Error message.
   ========== ====== ==============

Example Requests
----------------

Obtain nodes in a resource pool.

.. code-block:: text

   GET https://{endpoint}/v2/{project_id}/pools/{pool_name}/nodes

   { }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "kind" : "NodeList",
     "apiVersion" : "v2",
     "metadata" : { },
     "items" : [ {
       "kind" : "Node",
       "apiVersion" : "v2",
       "metadata" : {
         "name" : "os-node-created-zlncn",
         "creationTimestamp" : "2022-09-16T05:32:44Z"
       },
       "spec" : {
         "flavor" : "modelarts.vm.cpu.4ud"
       },
       "status" : {
         "phase" : "Available",
         "az" : "cn-xxxxx-7c",
         "privateIp" : "192.168.0.1",
         "resources" : {
           "cpu" : "3920m",
           "memory" : "6270Mi"
         },
         "availableResources" : {
           "cpu" : "2970m",
           "memory" : "4558Mi"
         }
       }
     }, {
       "kind" : "Node",
       "apiVersion" : "v2",
       "metadata" : {
         "name" : "os-node-created-4s522",
         "creationTimestamp" : "2022-09-16T03:20:53Z"
       },
       "spec" : {
         "flavor" : "modelarts.vm.cpu.4ud"
       },
       "status" : {
         "phase" : "Available",
         "az" : "cn-xxxxx-7c",
         "privateIp" : "192.168.0.2",
         "resources" : {
           "cpu" : "3920m",
           "memory" : "6270Mi"
         },
         "availableResources" : {
           "cpu" : "2970m",
           "memory" : "4558Mi"
         }
       }
     }, {
       "kind" : "Node",
       "apiVersion" : "v2",
       "metadata" : {
         "name" : "os-node-created-v7hfj",
         "creationTimestamp" : "2022-09-16T09:16:37Z"
       },
       "spec" : {
         "flavor" : "modelarts.vm.cpu.4ud"
       },
       "status" : {
         "phase" : "Available",
         "az" : "cn-xxxxx-7c",
         "privateIp" : "192.168.0.3",
         "resources" : {
           "cpu" : "3920m",
           "memory" : "6270Mi"
         },
         "availableResources" : {
           "cpu" : "3720m",
           "memory" : "5670Mi"
         }
       }
     } ]
   }

**Status code: 404**

Not found.

.. code-block::

   {
     "error_code" : "ModelArts.50015001",
     "error_msg" : "pool not found"
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
404         Not found.
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
