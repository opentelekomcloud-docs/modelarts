:original_name: ListWorkloads.html

.. _ListWorkloads:

Querying the dedicated resource pool Job List
=============================================

Function
--------

Obtain dedicated resource pool jobs.

Debugging
---------

You can debug this API through automatic authentication in or use the SDK sample code generated by API Explorer.

URI
---

GET /v2/{project_id}/pools/{pool_name}/workloads

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | pool_name  | Yes       | String | Namespace to which a job belongs.                                                        |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

.. table:: **Table 2** Query Parameters

   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                         |
   +=================+=================+=================+=====================================================================================================================================+
   | type            | No              | String          | Service to which a job belongs. The options are as follows:                                                                         |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  train: training job                                                                                                              |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  infer: inference job                                                                                                             |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  notebook: notebook job                                                                                                           |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | status          | No              | String          | Job status. The options are as follows:                                                                                             |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Queue: queuing                                                                                                                   |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Pending: waiting                                                                                                                 |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Abnormal: abnormal                                                                                                               |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Terminating: The task is being terminated.                                                                                       |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Creating: The gateway is being created. - Running                                                                                |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Completed: completed                                                                                                             |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Terminated: terminated                                                                                                           |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  Failed: The task fails to be executed.                                                                                           |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | sort            | No              | String          | Sorting basis field. The options are as follows:                                                                                    |
   |                 |                 |                 |                                                                                                                                     |
   |                 |                 |                 | -  create_time: Jobs are sorted by creation time.                                                                                   |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | ascend          | No              | Boolean         | Indicates whether to sort data in ascending order.                                                                                  |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | offset          | No              | String          | Start position for pagination query.                                                                                                |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+
   | limit           | No              | Integer         | Maximum number of records displayed on a page. If the value is empty or 0, the default value 500 is used. The maximum value is 500. |
   +-----------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 3** Response body parameters

   +-----------------------+------------------------------------------------------------------------------------+--------------------------------------------+
   | Parameter             | Type                                                                               | Description                                |
   +=======================+====================================================================================+============================================+
   | apiVersion            | String                                                                             | API version. The options are as follows:   |
   |                       |                                                                                    |                                            |
   |                       |                                                                                    | -  v1                                      |
   +-----------------------+------------------------------------------------------------------------------------+--------------------------------------------+
   | kind                  | String                                                                             | Resource type. The options are as follows: |
   |                       |                                                                                    |                                            |
   |                       |                                                                                    | -  WorkloadList: job list                  |
   +-----------------------+------------------------------------------------------------------------------------+--------------------------------------------+
   | items                 | Array of :ref:`Workload <en-us_topic_0000001909848024__response_workload>` objects | Job list.                                  |
   +-----------------------+------------------------------------------------------------------------------------+--------------------------------------------+

.. _en-us_topic_0000001909848024__response_workload:

.. table:: **Table 4** Workload

   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                           | Description                                                                                            |
   +=======================+================================================================================================+========================================================================================================+
   | apiVersion            | String                                                                                         | Resource version. The options are as follows:                                                          |
   |                       |                                                                                                |                                                                                                        |
   |                       |                                                                                                | -  v1                                                                                                  |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | kind                  | String                                                                                         | Resource type. The options are as follows:                                                             |
   |                       |                                                                                                |                                                                                                        |
   |                       |                                                                                                | -  Workload                                                                                            |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | type                  | String                                                                                         | Service type of a job. The options are as follows:                                                     |
   |                       |                                                                                                |                                                                                                        |
   |                       |                                                                                                | -  train: training job                                                                                 |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | namespace             | String                                                                                         | Name of the resource pool to which a job belongs.                                                      |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | name                  | String                                                                                         | Name                                                                                                   |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | jobName               | String                                                                                         | Upper-Layer Service Job Name                                                                           |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | uid                   | String                                                                                         | Job UID.                                                                                               |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | jobUUID               | String                                                                                         | Upper-layer service job ID.                                                                            |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | flavor                | String                                                                                         | Job specifications.                                                                                    |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | status                | String                                                                                         | Job status.                                                                                            |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | resourceRequirement   | :ref:`resourceRequirement <en-us_topic_0000001909848024__response_resourcerequirement>` object | Number of resource requests for running jobs.                                                          |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | priority              | String                                                                                         | Job priority                                                                                           |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | runningDuration       | Integer                                                                                        | Running duration of a job.                                                                             |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | pendingDuration       | Integer                                                                                        | Queuing duration of a job.                                                                             |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | pendingPosition       | Integer                                                                                        | Job queue position.                                                                                    |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | createTime            | Integer                                                                                        | Indicates the time when a job is created.                                                              |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | gvk                   | String                                                                                         | Job GVK.                                                                                               |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+
   | hostIps               | String                                                                                         | List of IP addresses of the nodes where the job is running. Separate the IP addresses with commas (,). |
   +-----------------------+------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000001909848024__response_resourcerequirement:

.. table:: **Table 5** resourceRequirement

   ============== ====== ===================
   Parameter      Type   Description
   ============== ====== ===================
   cpu            String CPU usage
   memory         String Memory usage
   nvidia.com/gpu String GPU resource usage.
   ============== ====== ===================

**Status code: 400**

.. table:: **Table 6** Response body parameters

   ========== ====== ==================
   Parameter  Type   Description
   ========== ====== ==================
   error_code String Error code.
   error_msg  String Error description.
   ========== ====== ==================

**Status code: 404**

.. table:: **Table 7** Response body parameters

   ========== ====== ==================
   Parameter  Type   Description
   ========== ====== ==================
   error_code String Error code.
   error_msg  String Error description.
   ========== ====== ==================

Example Requests
----------------

None

Example Responses
-----------------

**Status code: 400**

Bad Request.

.. code-block::

   {
     "error_code" : "ModelArts.50004000",
     "error_msg" : "Bad request."
   }

**Status code: 404**

Not Found.

.. code-block::

   {
     "error_code" : "ModelArts.50015001",
     "error_msg" : "Pool {name} not found."
   }

Status Codes
------------

=========== ============
Status Code Description
=========== ============
200         OK.
400         Bad Request.
404         Not Found.
=========== ============

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
