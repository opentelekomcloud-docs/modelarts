:original_name: ShowPoolRuntimeMetrics.html

.. _ShowPoolRuntimeMetrics:

Querying the Real-Time Resource Usage
=====================================

Function
--------

Obtain the real-time usage of all resource pools in the current project.

Debugging
---------

You can debug this API through automatic authentication in or use the SDK sample code generated by API Explorer.

URI
---

GET /v2/{project_id}/metrics/runtime/pools

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 2** Response body parameters

   +-----------------------+------------------------------------------------------------------------------------------+--------------------------------------------+
   | Parameter             | Type                                                                                     | Description                                |
   +=======================+==========================================================================================+============================================+
   | apiVersion            | String                                                                                   | Resource version.                          |
   +-----------------------+------------------------------------------------------------------------------------------+--------------------------------------------+
   | kind                  | String                                                                                   | Resource type. The options are as follows: |
   |                       |                                                                                          |                                            |
   |                       |                                                                                          | -  PoolMetricsList                         |
   +-----------------------+------------------------------------------------------------------------------------------+--------------------------------------------+
   | items                 | Array of :ref:`MetricsItem <en-us_topic_0000001909848040__response_metricsitem>` objects | Metric list                                |
   +-----------------------+------------------------------------------------------------------------------------------+--------------------------------------------+

.. _en-us_topic_0000001909848040__response_metricsitem:

.. table:: **Table 3** MetricsItem

   +-----------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------+
   | Parameter | Type                                                                                                   | Description                                     |
   +===========+========================================================================================================+=================================================+
   | table     | :ref:`table <en-us_topic_0000001909848040__response_table>` object                                     | Indicates the resource list.                    |
   +-----------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------+
   | metadata  | :ref:`ResourceMetricsMetadata <en-us_topic_0000001909848040__response_resourcemetricsmetadata>` object | Indicates the metadata of a resource indicator. |
   +-----------+--------------------------------------------------------------------------------------------------------+-------------------------------------------------+

.. _en-us_topic_0000001909848040__response_table:

.. table:: **Table 4** table

   +-----------+----------------------------------------------------------------------------+-------------------------+
   | Parameter | Type                                                                       | Description             |
   +===========+============================================================================+=========================+
   | allocated | :ref:`Allocated <en-us_topic_0000001909848040__response_allocated>` object | Allocated Resources     |
   +-----------+----------------------------------------------------------------------------+-------------------------+
   | capacity  | :ref:`Capacity <en-us_topic_0000001909848040__response_capacity>` object   | Total Resource Capacity |
   +-----------+----------------------------------------------------------------------------+-------------------------+

.. _en-us_topic_0000001909848040__response_allocated:

.. table:: **Table 5** Allocated

   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | Parameter | Type                                                               | Description                                                                                 |
   +===========+====================================================================+=============================================================================================+
   | value     | :ref:`Value <en-us_topic_0000001909848040__response_value>` object | Resource amount.                                                                            |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | timestamp | String                                                             | UTC time, in the format yyyy-MM-dd'T'HH:mm:ss'Z'.                                           |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | window    | String                                                             | Statistics interval. 1s indicates 1 second, 1m indicates 1 minute, and 1h indicates 1 hour. |
   +-----------+--------------------------------------------------------------------+---------------------------------------------------------------------------------------------+

.. _en-us_topic_0000001909848040__response_capacity:

.. table:: **Table 6** Capacity

   +-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
   | Parameter | Type                                                               | Description                                                                                  |
   +===========+====================================================================+==============================================================================================+
   | value     | :ref:`Value <en-us_topic_0000001909848040__response_value>` object | Number of resources.                                                                         |
   +-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
   | maxValue  | :ref:`Value <en-us_topic_0000001909848040__response_value>` object | Maximum number of elastic resources.                                                         |
   +-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
   | timestamp | String                                                             | UTC time. The format is yyyy-MM-dd'T'HH:mm:ss'Z'.                                            |
   +-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------+
   | window    | String                                                             | Statistical interval. 1s indicates 1 second, 1m indicates 1 minute, and 1h indicates 1 hour. |
   +-----------+--------------------------------------------------------------------+----------------------------------------------------------------------------------------------+

.. _en-us_topic_0000001909848040__response_value:

.. table:: **Table 7** Value

   ============= ====== ==============
   Parameter     Type   Description
   ============= ====== ==============
   cpu           String Number of CPUs
   memory        String Memory
   nvidia.com/t4 String t4 volume
   ============= ====== ==============

.. _en-us_topic_0000001909848040__response_resourcemetricsmetadata:

.. table:: **Table 8** ResourceMetricsMetadata

   ========= ====== ===================================================
   Parameter Type   Description
   ========= ====== ===================================================
   name      String Name of a resource indicator.
   labels    Object Indicates the tag information of a resource metric.
   ========= ====== ===================================================

Example Requests
----------------

None

Example Responses
-----------------

**Status code: 200**

OK.

.. code-block::

   {
     "apiVersion" : "v2",
     "kind" : "PoolMetricsList",
     "items" : [ {
       "table" : {
         "allocated" : {
           "value" : {
             "cpu" : 5,
             "memory" : "15548Mi",
             "nvidia.com/t4" : "1073m"
           },
           "timestamp" : "2022-03-30T07:09:10Z",
           "window" : "1m"
         },
         "capacity" : {
           "value" : {
             "cpu" : 16,
             "memory" : "64Gi",
             "nvidia.com/t4" : 2
           },
           "maxValue" : {
             "cpu" : 16,
             "memory" : "64Gi",
             "nvidia.com/t4" : 2
           },
           "timestamp" : "2022-03-30T07:09:10Z",
           "window" : "1m"
         }
       },
       "metadata" : {
         "name" : "hougang-rse-pool"
       }
     } ]
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK.
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
