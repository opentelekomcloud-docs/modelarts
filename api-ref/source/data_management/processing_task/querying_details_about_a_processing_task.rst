.. _DescribeProcessorTask:

Querying Details About a Processing Task
========================================

Function
--------

This API is used to query the details about processing tasks. You can query feature analysis tasks and data processing tasks. You can specify the **task_id** parameter to query the details about a specific task.

URI
---

GET /v2/{project_id}/processor-tasks/{task_id}

.. table:: **Table 1** Path parameters

   +------------+-----------+--------+--------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                        |
   +============+===========+========+====================================================================================================================+
   | project_id | Yes       | String | Project ID. For details about how to obtain the project ID, see :ref:`Obtaining a Project ID <modelarts_03_0147>`. |
   +------------+-----------+--------+--------------------------------------------------------------------------------------------------------------------+
   | task_id    | Yes       | String | ID of a data processing task.                                                                                      |
   +------------+-----------+--------+--------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 2** Response body parameters

   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                              | Description                                                                                                                                               |
   +=======================+===================================================================================================+===========================================================================================================================================================+
   | create_time           | Long                                                                                              | Time when a data processing task is created.                                                                                                              |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | data_source           | :ref:`ProcessorDataSource <describeprocessortask__response_processordatasource>` object           | Input of a data processing task. Either this parameter or **inputs** is delivered.                                                                        |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | String                                                                                            | Description of a data processing task.                                                                                                                    |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | duration_seconds      | Integer                                                                                           | Running time of data processing, in seconds.                                                                                                              |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error_msg             | String                                                                                            | Error message. This field is displayed when the value of status is **3**.                                                                                 |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | inputs                | Array of :ref:`ProcessorDataSource <describeprocessortask__response_processordatasource>` objects | Input channel list of a data processing task. Either this parameter or **data_source** is delivered.                                                      |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | is_current            | Boolean                                                                                           | Whether the current task is the latest of the same type of this version.                                                                                  |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                                                                                            | Name of a data processing task.                                                                                                                           |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | result                | Object                                                                                            | Output result of a data processing task. This field is displayed when status is set to **2** and is valid for a feature analysis task.                    |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | Integer                                                                                           | Status of a data processing task. The options are as follows:                                                                                             |
   |                       |                                                                                                   |                                                                                                                                                           |
   |                       |                                                                                                   | -  **0**: initialized                                                                                                                                     |
   |                       |                                                                                                   |                                                                                                                                                           |
   |                       |                                                                                                   | -  **1**: running                                                                                                                                         |
   |                       |                                                                                                   |                                                                                                                                                           |
   |                       |                                                                                                   | -  **2**: completed                                                                                                                                       |
   |                       |                                                                                                   |                                                                                                                                                           |
   |                       |                                                                                                   | -  **3**: failed                                                                                                                                          |
   |                       |                                                                                                   |                                                                                                                                                           |
   |                       |                                                                                                   | -  **4**: stopped                                                                                                                                         |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | task_id               | String                                                                                            | ID of a data processing task.                                                                                                                             |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | template              | :ref:`TemplateParam <describeprocessortask__response_templateparam>` object                       | Data processing template, such as the algorithm ID and parameters.                                                                                        |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version_count         | Integer                                                                                           | Version number of a data processing task.                                                                                                                 |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version_id            | String                                                                                            | Dataset version ID corresponding to a data processing task.                                                                                               |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version_name          | String                                                                                            | Dataset version name corresponding to a data processing task.                                                                                             |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | work_path             | :ref:`WorkPath <describeprocessortask__response_workpath>` object                                 | Working directory of a data processing task.                                                                                                              |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+
   | workspace_id          | String                                                                                            | Workspace ID of a data processing task. If no workspace is created, the default value is **0**. If a workspace is created and used, use the actual value. |
   +-----------------------+---------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _describeprocessortask__response_processordatasource:

.. table:: **Table 3** ProcessorDataSource

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                  |
   +=======================+=======================+==============================================================================================================================================================================+
   | name                  | String                | Dataset name.                                                                                                                                                                |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | source                | String                | Data source path. The options are as follows:                                                                                                                                |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  If **type** is set to **OBS**, **source** is an OBS path.                                                                                                                 |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  If **type** is set to **TASK**, **source** is a task ID.                                                                                                                  |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  If **type** is set to **DATASET**, **source** is a dataset ID.                                                                                                            |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  If **type** is set to **CUSTOM** and the API is called by resource tenants, set **source** to the **project_id** of the actual user. Otherwise, this field is left blank. |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                | Data source type. The options are as follows:                                                                                                                                |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  **OBS**: Data obtained from OBS                                                                                                                                           |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  **TASK**: Data processing task                                                                                                                                            |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  **DATASET**: Dataset                                                                                                                                                      |
   |                       |                       |                                                                                                                                                                              |
   |                       |                       | -  **CUSTOM**: Data called by resource tenants                                                                                                                               |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version_id            | String                | Version of a dataset.                                                                                                                                                        |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version_name          | String                | Dataset version name.                                                                                                                                                        |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _describeprocessortask__response_templateparam:

.. table:: **Table 4** TemplateParam

   +-----------------------+---------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                  | Description                                                                       |
   +=======================+=======================================================================================+===================================================================================+
   | id                    | String                                                                                | Task type, that is, ID of a data processing template. The options are as follows: |
   |                       |                                                                                       |                                                                                   |
   |                       |                                                                                       | -  **sys_data_analyse**: feature analysis                                         |
   |                       |                                                                                       |                                                                                   |
   |                       |                                                                                       | -  **sys_data_cleaning**: data cleansing                                          |
   |                       |                                                                                       |                                                                                   |
   |                       |                                                                                       | -  **sys_data_augmentation**: data augmentation                                   |
   |                       |                                                                                       |                                                                                   |
   |                       |                                                                                       | -  **sys_data_validation**: data validation                                       |
   |                       |                                                                                       |                                                                                   |
   |                       |                                                                                       | -  **sys_data_selection**: data selection                                         |
   +-----------------------+---------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
   | name                  | String                                                                                | Template name.                                                                    |
   +-----------------------+---------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+
   | operator_params       | Array of :ref:`OperatorParam <describeprocessortask__response_operatorparam>` objects | Operator parameter list.                                                          |
   +-----------------------+---------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------+

.. _describeprocessortask__response_operatorparam:

.. table:: **Table 5** OperatorParam

   +------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter              | Type    | Description                                                                                                                                                                                                                                                                                                                                                  |
   +========================+=========+==============================================================================================================================================================================================================================================================================================================================================================+
   | advanced_params_switch | Boolean | Advanced parameter switch.                                                                                                                                                                                                                                                                                                                                   |
   +------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                     | String  | ID of an operator.                                                                                                                                                                                                                                                                                                                                           |
   +------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                   | String  | Name of an operator.                                                                                                                                                                                                                                                                                                                                         |
   +------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | params                 | Object  | Operator parameter. The parameter type is map<string,object>. Currently, object only supports the types of Boolean, Integer, Long, String, List and Map<String,String>. For two special scenarios of object detection and image classification in a data preprocessing task, the value of **task_type** is **object_detection** or **image_classification**. |
   +------------------------+---------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _describeprocessortask__response_workpath:

.. table:: **Table 6** WorkPath

   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                              |
   +=======================+=======================+==========================================================================================================================================+
   | name                  | String                | Dataset name.                                                                                                                            |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | output_path           | String                | Output path.                                                                                                                             |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | path                  | String                | Working path. The options are as follows:                                                                                                |
   |                       |                       |                                                                                                                                          |
   |                       |                       | -  If **type** is set to **OBS**, **source** is an OBS path.                                                                             |
   |                       |                       |                                                                                                                                          |
   |                       |                       | -  If **type** is set to **DATASET**, **source** is a dataset ID.                                                                        |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                | Type of a working path. The options are as follows:                                                                                      |
   |                       |                       |                                                                                                                                          |
   |                       |                       | -  **OBS**: OBS path                                                                                                                     |
   |                       |                       |                                                                                                                                          |
   |                       |                       | -  **DATASET**: dataset                                                                                                                  |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | version_id            | String                | Version of a dataset.                                                                                                                    |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+
   | version_name          | String                | Name of a dataset version. The value can contain 0 to 32 characters. Only digits, letters, underscores (_), and hyphens (-) are allowed. |
   +-----------------------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Querying Details About a Data Processing Task

.. code-block::

   GET https://{endpoint}/v2/{project_id}/processor-tasks/{task_id}

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "task_id" : "SSzH9AdmHTvIBeihArb",
     "name" : "PRE-6c83",
     "description" : "test",
     "inputs" : [ {
       "type" : "DATASET",
       "source" : "qjHAs14pRu4n2so1Qlb",
       "version_id" : "cUELhTAYGIR36YpTE5Y",
       "name" : "dataset-dba1",
       "version_name" : "V001"
     } ],
     "work_path" : {
       "type" : "DATASET",
       "path" : "qjHAs14pRu4n2so1Qlb",
       "name" : "dataset-dba1",
       "version_name" : "V002",
       "output_path" : "/test-lxm/data-out/EnyHCFzjTFY20U3sYSE/"
     },
     "template" : {
       "id" : "sys_data_validation",
       "name" : "data validation template name",
       "operator_params" : [ {
         "name" : "MetaValidation",
         "advanced_params_switch" : false,
         "params" : {
           "task_type" : "image_classification",
           "dataset_type" : "manifest",
           "source_service" : "select",
           "filter_func" : "data_validation_select",
           "image_max_width" : "-1",
           "image_max_height" : "-1",
           "total_status" : "[0,1,2]"
         }
       } ]
     },
     "status" : 2,
     "duration_seconds" : 277,
     "create_time" : 1614245065569,
     "workspace_id" : "0",
     "version_count" : 1,
     "ai_project" : ""
   }

Status Codes
------------

=========== ============
Status Code Description
=========== ============
200         OK
401         Unauthorized
403         Forbidden
404         Not Found
=========== ============

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
