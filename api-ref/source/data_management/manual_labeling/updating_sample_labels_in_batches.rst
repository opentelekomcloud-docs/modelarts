.. _UpdateSamples:

Updating Sample Labels in Batches
=================================

Function
--------

This API is used to update sample labels in batches, including adding, modifying, and deleting sample labels. If the parameter **Labels** of a sample in the request body is not specified, the label of the sample is deleted.

URI
---

PUT /v2/{project_id}/datasets/{dataset_id}/data-annotations/samples

.. table:: **Table 1** Path parameters

   +------------+-----------+--------+--------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                        |
   +============+===========+========+====================================================================================================================+
   | dataset_id | Yes       | String | Dataset ID.                                                                                                        |
   +------------+-----------+--------+--------------------------------------------------------------------------------------------------------------------+
   | project_id | Yes       | String | Project ID. For details about how to obtain the project ID, see :ref:`Obtaining a Project ID <modelarts_03_0147>`. |
   +------------+-----------+--------+--------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +-----------+-----------+----------------------------------------------------------------------------+------------------------------------------+
   | Parameter | Mandatory | Type                                                                       | Description                              |
   +===========+===========+============================================================================+==========================================+
   | email     | No        | String                                                                     | Email address of a labeling team member. |
   +-----------+-----------+----------------------------------------------------------------------------+------------------------------------------+
   | samples   | No        | Array of :ref:`SampleLabels <updatesamples__request_samplelabels>` objects | Updated sample list.                     |
   +-----------+-----------+----------------------------------------------------------------------------+------------------------------------------+

.. _updatesamples__request_samplelabels:

.. table:: **Table 3** SampleLabels

   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type                                                                     | Description                                                                        |
   +=================+=================+==========================================================================+====================================================================================+
   | labels          | No              | Array of :ref:`SampleLabel <updatesamples__request_samplelabel>` objects | Sample label list. If this parameter is left blank, all sample labels are deleted. |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | metadata        | No              | :ref:`SampleMetadata <updatesamples__request_samplemetadata>` object     | Key-value pair of the sample **metadata** attribute.                               |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | sample_id       | No              | String                                                                   | Sample ID.                                                                         |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | sample_type     | No              | Integer                                                                  | Sample type. The options are as follows:                                           |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **0**: image                                                                    |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **1**: text                                                                     |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **2**: speech                                                                   |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **4**: table                                                                    |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **6**: video                                                                    |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **9**: custom format                                                            |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | sample_usage    | No              | String                                                                   | Sample usage. The options are as follows:                                          |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **TRAIN**: training                                                             |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **EVAL**: evaluation                                                            |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **TEST**: test                                                                  |
   |                 |                 |                                                                          |                                                                                    |
   |                 |                 |                                                                          | -  **INFERENCE**: inference                                                        |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | source          | No              | String                                                                   | Source address of sample data.                                                     |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+
   | worker_id       | No              | String                                                                   | ID of a labeling team member.                                                      |
   +-----------------+-----------------+--------------------------------------------------------------------------+------------------------------------------------------------------------------------+

.. _updatesamples__request_samplelabel:

.. table:: **Table 4** SampleLabel

   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type                                                                           | Description                                                                                                                           |
   +=================+=================+================================================================================+=======================================================================================================================================+
   | annotated_by    | No              | String                                                                         | Video labeling method, which is used to distinguish whether a video is labeled manually or automatically. The options are as follows: |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **human**: manual labeling                                                                                                         |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **auto**: automatic labeling                                                                                                       |
   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | id              | No              | String                                                                         | Label ID.                                                                                                                             |
   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | name            | No              | String                                                                         | Label name.                                                                                                                           |
   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | property        | No              | :ref:`SampleLabelProperty <updatesamples__request_samplelabelproperty>` object | Attribute key-value pair of the sample label, such as the object shape and shape feature.                                             |
   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | score           | No              | Float                                                                          | Confidence.                                                                                                                           |
   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+
   | type            | No              | Integer                                                                        | Label type. The options are as follows:                                                                                               |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **0**: image classification                                                                                                        |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **1**: object detection                                                                                                            |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **100**: text classification                                                                                                       |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **101**: named entity recognition                                                                                                  |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **102**: text triplet relationship                                                                                                 |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **103**: text triplet entity                                                                                                       |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **200**: speech classification                                                                                                     |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **201**: speech content                                                                                                            |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **202**: speech paragraph labeling                                                                                                 |
   |                 |                 |                                                                                |                                                                                                                                       |
   |                 |                 |                                                                                | -  **600**: video classification                                                                                                      |
   +-----------------+-----------------+--------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------+

.. _updatesamples__request_samplelabelproperty:

.. table:: **Table 5** SampleLabelProperty

   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                   | Mandatory       | Type            | Description                                                                                                                                                                                                                                                                                                                                                                                                               |
   +=============================+=================+=================+===========================================================================================================================================================================================================================================================================================================================================================================================================================+
   | @modelarts:content          | No              | String          | Speech text content, which is a default attribute dedicated to the speech label (including the speech content and speech start and end points).                                                                                                                                                                                                                                                                           |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:end_index        | No              | Integer         | End position of the text, which is a default attribute dedicated to the named entity label. The end position does not include the character corresponding to the value of **end_index**. Examples are as follows.                                                                                                                                                                                                         |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  If the text content is "Barack Hussein Obama II (born August 4, 1961) is an American attorney and politician.", the **start_index** and **end_index** values of "Barack Hussein Obama II" are **0** and **23**, respectively.                                                                                                                                                                                          |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  If the text content is "By the end of 2018, the company has more than 100 employees.", the **start_index** and **end_index** values of "By the end of 2018" are **0** and **18**, respectively.                                                                                                                                                                                                                        |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:end_time         | No              | String          | Speech end time, which is a default attribute dedicated to the speech start/end point label, in the format of **hh:mm:ss.SSS**. (**hh** indicates hour; **mm** indicates minute; **ss** indicates second; and **SSS** indicates millisecond.)                                                                                                                                                                             |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:feature          | No              | Object          | Shape feature, which is a default attribute dedicated to the object detection label, with type of **List**. The upper left corner of an image is used as the coordinate origin **[0,0]**. Each coordinate point is represented by *[x, y]*. *x* indicates the horizontal coordinate, and *y* indicates the vertical coordinate (both *x* and *y* are greater than or equal to 0). The format of each shape is as follows: |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **bndbox**: consists of two points, for example, **[[0,10],[50,95]]**. The first point is located at the upper left corner of the rectangle and the second point is located at the lower right corner of the rectangle. That is, the X coordinate of the first point must be smaller than that of the second point, and the Y coordinate of the second point must be smaller than that of the first point.             |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **polygon**: consists of multiple points that are connected in sequence to form a polygon, for example, **[[0,100],[50,95],[10,60],[500,400]]**.                                                                                                                                                                                                                                                                       |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **circle**: consists of the center point and radius, for example, **[[100,100],[50]]**.                                                                                                                                                                                                                                                                                                                                |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **line**: consists of two points, for example, **[[0,100],[50,95]]**. The first point is the start point, and the second point is the end point.                                                                                                                                                                                                                                                                       |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **dashed**: consists of two points, for example, **[[0,100],[50,95]]**. The first point is the start point, and the second point is the end point.                                                                                                                                                                                                                                                                     |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **point**: consists of one point, for example, **[[0,100]]**.                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **polyline**: consists of multiple points, for example, **[[0,100],[50,95],[10,60],[500,400]]**.                                                                                                                                                                                                                                                                                                                       |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:from             | No              | String          | ID of the head entity in the triplet relationship label, which is a default attribute dedicated to the triplet relationship label.                                                                                                                                                                                                                                                                                        |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:hard             | No              | String          | Sample labeled as a hard sample or not, which is a default attribute. Options:                                                                                                                                                                                                                                                                                                                                            |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **0/false**: not a hard example                                                                                                                                                                                                                                                                                                                                                                                        |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **1/true**: hard example                                                                                                                                                                                                                                                                                                                                                                                               |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:hard_coefficient | No              | String          | Coefficient of difficulty of each label level, which is a default attribute. The value range is **[0,1]**.                                                                                                                                                                                                                                                                                                                |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:hard_reasons     | No              | String          | Reasons that the sample is a hard sample, which is a default attribute. Use a hyphen (-) to separate every two hard sample reason IDs, for example, **3-20-21-19**. The options are as follows:                                                                                                                                                                                                                           |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **0**: No target objects are identified.                                                                                                                                                                                                                                                                                                                                                                               |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **1**: The confidence is low.                                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **2**: The clustering result based on the training dataset is inconsistent with the prediction result.                                                                                                                                                                                                                                                                                                                 |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **3**: The prediction result is greatly different from the data of the same type in the training dataset.                                                                                                                                                                                                                                                                                                              |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **4**: The prediction results of multiple consecutive similar images are inconsistent.                                                                                                                                                                                                                                                                                                                                 |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **5**: There is a large offset between the image resolution and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                      |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **6**: There is a large offset between the aspect ratio of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                             |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **7**: There is a large offset between the brightness of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                               |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **8**: There is a large offset between the saturation of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                               |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **9**: There is a large offset between the color richness of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **10**: There is a large offset between the definition of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                              |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **11**: There is a large offset between the number of frames of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                        |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **12**: There is a large offset between the standard deviation of area of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                           |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **13**: There is a large offset between the aspect ratio of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                         |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **14**: There is a large offset between the area portion of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                         |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **15**: There is a large offset between the edge of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                 |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **16**: There is a large offset between the brightness of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **17**: There is a large offset between the definition of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **18**: There is a large offset between the stack of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **19**: The data enhancement result based on GaussianBlur is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                            |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **20**: The data enhancement result based on fliplr is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                  |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **21**: The data enhancement result based on Crop is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **22**: The data enhancement result based on flipud is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                  |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **23**: The data enhancement result based on scale is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                   |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **24**: The data enhancement result based on translate is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                               |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **25**: The data enhancement result based on shear is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                   |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **26**: The data enhancement result based on superpixels is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                             |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **27**: The data enhancement result based on sharpen is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                 |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **28**: The data enhancement result based on add is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                     |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **29**: The data enhancement result based on invert is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                  |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **30**: The data is predicted to be abnormal.                                                                                                                                                                                                                                                                                                                                                                          |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:shape            | No              | String          | Object shape, which is a default attribute dedicated to the object detection label and is left empty by default. The options are as follows:                                                                                                                                                                                                                                                                              |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **bndbox**: rectangle                                                                                                                                                                                                                                                                                                                                                                                                  |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **polygon**: polygon                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **circle**: circle                                                                                                                                                                                                                                                                                                                                                                                                     |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **line**: straight line                                                                                                                                                                                                                                                                                                                                                                                                |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **dashed**: dotted line                                                                                                                                                                                                                                                                                                                                                                                                |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **point**: point                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                             |                 |                 |                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                 | -  **polyline**: polyline                                                                                                                                                                                                                                                                                                                                                                                                 |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:source           | No              | String          | Speech source, which is a default attribute dedicated to the speech start/end point label and can be set to a speaker or narrator.                                                                                                                                                                                                                                                                                        |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:start_index      | No              | Integer         | Start position of the text, which is a default attribute dedicated to the named entity label. The start value begins from 0, including the character corresponding to the value of **start_index**.                                                                                                                                                                                                                       |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:start_time       | No              | String          | Speech start time, which is a default attribute dedicated to the speech start/end point label, in the format of **hh:mm:ss.SSS**. (**hh** indicates hour; **mm** indicates minute; **ss** indicates second; and **SSS** indicates millisecond.)                                                                                                                                                                           |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:to               | No              | String          | ID of the tail entity in the triplet relationship label, which is a default attribute dedicated to the triplet relationship label.                                                                                                                                                                                                                                                                                        |
   +-----------------------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _updatesamples__request_samplemetadata:

.. table:: **Table 6** SampleMetadata

   +-----------------------------+-----------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                   | Mandatory       | Type              | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   +=============================+=================+===================+====================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | @modelarts:hard             | No              | Double            | Whether the sample is labeled as a hard sample, which is a default attribute. The options are as follows:                                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **0**: non-hard sample                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **1**: hard sample                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   +-----------------------------+-----------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:hard_coefficient | No              | Double            | Coefficient of difficulty of each sample level, which is a default attribute. The value range is **[0,1]**.                                                                                                                                                                                                                                                                                                                                                                                        |
   +-----------------------------+-----------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:hard_reasons     | No              | Array of integers | ID of a hard sample reason, which is a default attribute. The options are as follows:                                                                                                                                                                                                                                                                                                                                                                                                              |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **0**: No target objects are identified.                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **1**: The confidence is low.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **2**: The clustering result based on the training dataset is inconsistent with the prediction result.                                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **3**: The prediction result is greatly different from the data of the same type in the training dataset.                                                                                                                                                                                                                                                                                                                                                                                       |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **4**: The prediction results of multiple consecutive similar images are inconsistent.                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **5**: There is a large offset between the image resolution and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                               |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **6**: There is a large offset between the aspect ratio of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                      |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **7**: There is a large offset between the brightness of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                        |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **8**: There is a large offset between the saturation of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                        |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **9**: There is a large offset between the color richness of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **10**: There is a large offset between the definition of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                       |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **11**: There is a large offset between the number of frames of the image and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                 |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **12**: There is a large offset between the standard deviation of area of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **13**: There is a large offset between the aspect ratio of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                  |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **14**: There is a large offset between the area portion of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                  |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **15**: There is a large offset between the edge of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **16**: There is a large offset between the brightness of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **17**: There is a large offset between the definition of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **18**: There is a large offset between the stack of image frames and the feature distribution of the training dataset.                                                                                                                                                                                                                                                                                                                                                                         |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **19**: The data enhancement result based on GaussianBlur is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                     |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **20**: The data enhancement result based on fliplr is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **21**: The data enhancement result based on Crop is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                             |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **22**: The data enhancement result based on flipud is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **23**: The data enhancement result based on scale is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                            |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **24**: The data enhancement result based on translate is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                        |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **25**: The data enhancement result based on shear is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                            |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **26**: The data enhancement result based on superpixels is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                      |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **27**: The data enhancement result based on sharpen is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                          |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **28**: The data enhancement result based on add is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                              |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **29**: The data enhancement result based on invert is inconsistent with the prediction result of the original image.                                                                                                                                                                                                                                                                                                                                                                           |
   |                             |                 |                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                             |                 |                   | -  **30**: The data is predicted to be abnormal.                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   +-----------------------------+-----------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | @modelarts:size             | No              | Array of objects  | Image size (width, height, and depth of the image), which is a default attribute, with type of **List**. In the list, the first number indicates the width (pixels), the second number indicates the height (pixels), and the third number indicates the depth (the depth can be left blank and the default value is **3**). For example, **[100,200,3]** and **[100,200]** are both valid. Note: This parameter is mandatory only when the sample label list contains the object detection label. |
   +-----------------------------+-----------------+-------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 7** Response body parameters

   +-----------------------+-------------------------------------------------------------------------------+------------------------------------------------------------------+
   | Parameter             | Type                                                                          | Description                                                      |
   +=======================+===============================================================================+==================================================================+
   | error_code            | String                                                                        | Error code.                                                      |
   +-----------------------+-------------------------------------------------------------------------------+------------------------------------------------------------------+
   | error_msg             | String                                                                        | Error message.                                                   |
   +-----------------------+-------------------------------------------------------------------------------+------------------------------------------------------------------+
   | results               | Array of :ref:`BatchResponse <updatesamples__response_batchresponse>` objects | Response list for updating sample labels in batches.             |
   +-----------------------+-------------------------------------------------------------------------------+------------------------------------------------------------------+
   | success               | Boolean                                                                       | Whether the operation is successful. The options are as follows: |
   |                       |                                                                               |                                                                  |
   |                       |                                                                               | -  **true**: successful                                          |
   |                       |                                                                               |                                                                  |
   |                       |                                                                               | -  **false**: failed                                             |
   +-----------------------+-------------------------------------------------------------------------------+------------------------------------------------------------------+

.. _updatesamples__response_batchresponse:

.. table:: **Table 8** BatchResponse

   +-----------------------+-----------------------+------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                            |
   +=======================+=======================+========================================================================+
   | error_code            | String                | Error code.                                                            |
   +-----------------------+-----------------------+------------------------------------------------------------------------+
   | error_msg             | String                | Error message.                                                         |
   +-----------------------+-----------------------+------------------------------------------------------------------------+
   | success               | Boolean               | Check whether the operation is successful. The options are as follows: |
   |                       |                       |                                                                        |
   |                       |                       | -  **true**: The operation is successful.                              |
   |                       |                       |                                                                        |
   |                       |                       | -  **false**: The operation is failed.                                 |
   +-----------------------+-----------------------+------------------------------------------------------------------------+

Example Requests
----------------

Updating Sample Labels in Batches

.. code-block::

   {
     "samples" : [ {
       "sample_id" : "8b583c44bf249f8ba43ea42c92920221",
       "labels" : [ {
         "name" : "yunbao"
       } ]
     }, {
       "sample_id" : "b5fe3039879660a2e6bf18166e247f68",
       "labels" : [ {
         "name" : "yunbao"
       } ]
     } ]
   }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "success" : true
   }

Status Codes
------------

=========== ============
Status Code Description
=========== ============
200         OK
401         Unauthorized
403         Forbidden
404         Not Found
=========== ============

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
