Querying Details About a Dataset Import Task
============================================

Function
--------

This API is used to query details about a dataset import task.

URI
---

GET /v2/{project_id}/datasets/{dataset_id}/import-tasks/{task_id}

.. table:: **Table 1** Path parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                                                                                                |
   +============+===========+========+============================================================================================================================================================+
   | dataset_id | Yes       | String | Dataset ID.                                                                                                                                                |
   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | project_id | Yes       | String | Project ID. For details about how to obtain the project ID, see `Obtaining a Project ID <../../common_parameters/obtaining_a_project_id_and_name.html>`__. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | task_id    | Yes       | String | Task ID.                                                                                                                                                   |
   +------------+-----------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

None

Response Parameters
-------------------

**Status code: 200**



.. _DescImportTaskresponseImportTaskStatusResp:

.. table:: **Table 2** Response body parameters

   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                 | Type                                                                  | Description                                                                                                                                                        |
   +===========================+=======================================================================+====================================================================================================================================================================+
   | annotated_sample_count    | Long                                                                  | Number of labeled samples.                                                                                                                                         |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | create_time               | Long                                                                  | Time when a task is created.                                                                                                                                       |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | data_source               | `DataSource <#descimporttaskresponsedatasource>`__ object             | Data source.                                                                                                                                                       |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dataset_id                | String                                                                | Dataset ID.                                                                                                                                                        |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | elapsed_time              | Long                                                                  | Task running time, in seconds.                                                                                                                                     |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error_code                | String                                                                | Error code.                                                                                                                                                        |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | error_msg                 | String                                                                | Error message.                                                                                                                                                     |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | file_statistics           | `FileCopyProgress <#descimporttaskresponsefilecopyprogress>`__ object | Progress of file copy.                                                                                                                                             |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | finished_file_count       | Long                                                                  | Number of files that have been transferred.                                                                                                                        |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | finished_file_size        | Long                                                                  | Size of the file that has been transferred, in bytes.                                                                                                              |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | import_path               | String                                                                | OBS path or **manifest** path to be imported.                                                                                                                      |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  When importing a manifest file, ensure that the path is accurate to the manifest file.                                                                          |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  When a path is imported as a directory, the dataset type can only support image classification, object detection, text classification, or sound classification. |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | import_type               | Integer                                                               | Import mode. The options are as follows:                                                                                                                           |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **0**: Import by directory.                                                                                                                                     |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **1**: Import by manifest file.                                                                                                                                 |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | imported_sample_count     | Long                                                                  | Number of imported samples.                                                                                                                                        |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | imported_sub_sample_count | Long                                                                  | Number of imported subsamples.                                                                                                                                     |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | processor_task_id         | String                                                                | ID of a preprocessing task.                                                                                                                                        |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | processor_task_status     | Integer                                                               | Status of a preprocessing task.                                                                                                                                    |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                    | String                                                                | Status of an import task. The options are as follows:                                                                                                              |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **QUEUING**: queuing                                                                                                                                            |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **STARTING**: execution started                                                                                                                                 |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **RUNNING**: running                                                                                                                                            |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **COMPLETED**: completed                                                                                                                                        |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **FAILED**: failed                                                                                                                                              |
   |                           |                                                                       |                                                                                                                                                                    |
   |                           |                                                                       | -  **NOT_EXIST**: not found                                                                                                                                        |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | task_id                   | String                                                                | Task ID.                                                                                                                                                           |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_file_count          | Long                                                                  | Total number of files.                                                                                                                                             |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_file_size           | Long                                                                  | Total file size, in bytes.                                                                                                                                         |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_sample_count        | Long                                                                  | Total number of samples.                                                                                                                                           |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | total_sub_sample_count    | Long                                                                  | Total number of subsamples generated from the parent samples.                                                                                                      |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | unconfirmed_sample_count  | Long                                                                  | Number of samples to be confirmed.                                                                                                                                 |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | update_ms                 | Long                                                                  | Time when a task is updated.                                                                                                                                       |
   +---------------------------+-----------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+



.. _DescImportTaskresponseDataSource:

.. table:: **Table 3** DataSource

   +-----------------------+-------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                              | Description                                                                                                                |
   +=======================+===================================================================+============================================================================================================================+
   | data_path             | String                                                            | Data source path.                                                                                                          |
   +-----------------------+-------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | data_type             | Integer                                                           | Data type. The options are as follows:                                                                                     |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **0**: OBS bucket (default value)                                                                                       |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **1**: GaussDB(DWS)                                                                                                     |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **2**: DLI                                                                                                              |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **3**: RDS                                                                                                              |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **4**: MRS                                                                                                              |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **5**: AI Gallery                                                                                                       |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **6**: Inference service                                                                                                |
   +-----------------------+-------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | schema_maps           | Array of `SchemaMap <#descimporttaskresponseschemamap>`__ objects | Schema mapping information corresponding to the table data.                                                                |
   +-----------------------+-------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | source_info           | `SourceInfo <#descimporttaskresponsesourceinfo>`__ object         | Information required for importing a table data source.                                                                    |
   +-----------------------+-------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+
   | with_column_header    | Boolean                                                           | Whether the first row in the file is a column name. This field is valid for the table dataset. The options are as follows: |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **true**: The first row in the file is the column name.                                                                 |
   |                       |                                                                   |                                                                                                                            |
   |                       |                                                                   | -  **false**: The first row in the file is not the column name.                                                            |
   +-----------------------+-------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------+



.. _DescImportTaskresponseSchemaMap:

.. table:: **Table 4** SchemaMap

   ========= ====== ===============================
   Parameter Type   Description
   ========= ====== ===============================
   dest_name String Name of the destination column.
   src_name  String Name of the source column.
   ========= ====== ===============================



.. _DescImportTaskresponseSourceInfo:

.. table:: **Table 5** SourceInfo

   +-----------------------+-----------------------+--------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                  |
   +=======================+=======================+==============================================================+
   | cluster_id            | String                | ID of an MRS cluster.                                        |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | cluster_mode          | String                | Running mode of an MRS cluster. The options are as follows:  |
   |                       |                       |                                                              |
   |                       |                       | -  **0**: normal cluster                                     |
   |                       |                       |                                                              |
   |                       |                       | -  **1**: security cluster                                   |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | cluster_name          | String                | Name of an MRS cluster.                                      |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | database_name         | String                | Name of the database to which the table dataset is imported. |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | input                 | String                | HDFS path of a table dataset.                                |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | ip                    | String                | IP address of your GaussDB(DWS) cluster.                     |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | port                  | String                | Port number of your GaussDB(DWS) cluster.                    |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | queue_name            | String                | DLI queue name of a table dataset.                           |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | subnet_id             | String                | Subnet ID of an MRS cluster.                                 |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | table_name            | String                | Name of the table to which a table dataset is imported.      |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | user_name             | String                | Username, which is mandatory for GaussDB(DWS) data.          |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | user_password         | String                | User password, which is mandatory for GaussDB(DWS) data.     |
   +-----------------------+-----------------------+--------------------------------------------------------------+
   | vpc_id                | String                | ID of the VPC where an MRS cluster resides.                  |
   +-----------------------+-----------------------+--------------------------------------------------------------+



.. _DescImportTaskresponseFileCopyProgress:

.. table:: **Table 6** FileCopyProgress

   +--------------------+------+-------------------------------------------------------+
   | Parameter          | Type | Description                                           |
   +====================+======+=======================================================+
   | file_num_finished  | Long | Number of files that have been transferred.           |
   +--------------------+------+-------------------------------------------------------+
   | file_num_total     | Long | Total number of files.                                |
   +--------------------+------+-------------------------------------------------------+
   | file_size_finished | Long | Size of the file that has been transferred, in bytes. |
   +--------------------+------+-------------------------------------------------------+
   | file_size_total    | Long | Total file size, in bytes.                            |
   +--------------------+------+-------------------------------------------------------+

Example Requests
----------------

Querying Details About an Import Task

.. code-block::

   GET https://{endpoint}/v2/{project_id}/datasets/{dataset_id}/import-tasks/{task_id}

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "status" : "COMPLETED",
     "task_id" : "gfghHSokody6AJigS5A_RHJ1zOkIoI3Nzwxj8nh",
     "dataset_id" : "gfghHSokody6AJigS5A",
     "import_path" : "obs://test-obs/daoLu_images/cat-dog/",
     "import_type" : 0,
     "total_sample_count" : 20,
     "imported_sample_count" : 20,
     "annotated_sample_count" : 20,
     "total_sub_sample_count" : 0,
     "imported_sub_sample_count" : 0,
     "total_file_size" : 0,
     "finished_file_count" : 0,
     "finished_file_size" : 0,
     "total_file_count" : 0,
     "update_ms" : 1606114833955,
     "create_time" : 1606114833874,
     "elapsed_time" : 2
   }

Status Codes
------------



.. _DescImportTaskstatuscode:

=========== ============
Status Code Description
=========== ============
200         OK
401         Unauthorized
403         Forbidden
404         Not Found
=========== ============

Error Codes
-----------

See `Error Codes <../../common_parameters/error_codes.html>`__.


