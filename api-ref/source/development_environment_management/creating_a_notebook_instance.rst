:original_name: CreateNotebook.html

.. _CreateNotebook:

Creating a Notebook Instance
============================

Function
--------

You can create a notebook instance based on the specified instance specifications, AI engine images, and storage parameters. You can access the notebook instance through the web page or SSH client.

Calling this API is an asynchronous operation. You can obtain the status of a notebook instance by calling the API for querying notebook instance details.

Constraints
-----------

None

URI
---

POST /v1/{project_id}/notebooks

.. table:: **Table 1** Path Parameters

   +------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter  | Mandatory | Type   | Description                                                                              |
   +============+===========+========+==========================================================================================+
   | project_id | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID and Name <modelarts_03_0147>`. |
   +------------+-----------+--------+------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type                                                                                                                   | Description                                                                                                                                                                                                                                         |
   +=================+=================+========================================================================================================================+=====================================================================================================================================================================================================================================================+
   | description     | No              | String                                                                                                                 | Instance description. The value contains a maximum of 512 characters and cannot contain the following characters: &<>"'/.                                                                                                                           |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | duration        | No              | Long                                                                                                                   | Running duration starting from the current time. It is recommended that this attribute be configured in leaseReq. If this attribute has a value, the value of leaseReq is ignored and the automatic instance stop type is scheduled stop. Unit: ms. |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | endpoints       | No              | Array of :ref:`EndpointsReq <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_endpointsreq>` objects | This section describes how to configure the local IDE (such as PyCharm and VS Code) or SSH client to remotely access a notebook instance through SSH.                                                                                               |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | feature         | No              | String                                                                                                                 | Instance type. The default value is **NOTEBOOK**. Options:                                                                                                                                                                                          |
   |                 |                 |                                                                                                                        |                                                                                                                                                                                                                                                     |
   |                 |                 |                                                                                                                        | -  **DEFAULT**: free CodeLab instance. You can create only one.                                                                                                                                                                                     |
   |                 |                 |                                                                                                                        |                                                                                                                                                                                                                                                     |
   |                 |                 |                                                                                                                        | -  **NOTEBOOK**: billed instance.                                                                                                                                                                                                                   |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | flavor          | Yes             | String                                                                                                                 | Instance flavor. The following flavors are for reference only. Obtain the flavors displayed on the console in the target region.                                                                                                                    |
   |                 |                 |                                                                                                                        |                                                                                                                                                                                                                                                     |
   |                 |                 |                                                                                                                        | -  **modelarts.vm.cpu.2u**: General-purpose Intel CPU flavor, ideal for rapid data exploration and experiments                                                                                                                                      |
   |                 |                 |                                                                                                                        |                                                                                                                                                                                                                                                     |
   |                 |                 |                                                                                                                        | -  **modelarts.vm.cpu.8u**: General computing-plus Intel CPU flavors, ideal for compute-intensive applications                                                                                                                                      |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | image_id        | Yes             | String                                                                                                                 | Specifies the image ID of the notebook instance to be created. The image ID is in the Universally Unique Identifier (UUID) format. You can obtain the image ID by calling the ListImage.xml interface.                                              |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name            | Yes             | String                                                                                                                 | Instance name, which contains a maximum of 128 characters, including letters, digits, hyphens (-), and underscores (_). Instance names can be duplicate.                                                                                            |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | pool_id         | No              | String                                                                                                                 | ID of a dedicated resource pool, for example, **pool41664192**. This parameter is mandatory if a dedicated resource pool needs to be specified for creating an instance.                                                                            |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volume          | Yes             | :ref:`VolumeReq <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_volumereq>` object                 | Storage volume.                                                                                                                                                                                                                                     |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | workspace_id    | No              | String                                                                                                                 | Workspace ID. If no workspaces are available, the default value is **0**.                                                                                                                                                                           |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | hooks           | No              | :ref:`CustomHooks <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_customhooks>` object             | Customized startup script hook configuration.                                                                                                                                                                                                       |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | lease           | No              | :ref:`LeaseReq <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_leasereq>` object                   | Instance lease configuration.                                                                                                                                                                                                                       |
   +-----------------+-----------------+------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_endpointsreq:

.. table:: **Table 3** EndpointsReq

   +--------------------+-----------------+------------------+-------------------------------------------------------------------------------------------------------------------------------+
   | Parameter          | Mandatory       | Type             | Description                                                                                                                   |
   +====================+=================+==================+===============================================================================================================================+
   | allowed_access_ips | No              | Array of strings | Public IP addresses that can remotely access the notebook instance. A maximum of five public IP addresses are supported.      |
   +--------------------+-----------------+------------------+-------------------------------------------------------------------------------------------------------------------------------+
   | service            | No              | String           | Supported service. Possible values are as follows:                                                                            |
   |                    |                 |                  |                                                                                                                               |
   |                    |                 |                  | -  **NOTEBOOK**: You can access notebook instances using HTTPS.                                                               |
   |                    |                 |                  |                                                                                                                               |
   |                    |                 |                  | -  **SSH**: You can remotely access notebook instances through SSH.                                                           |
   +--------------------+-----------------+------------------+-------------------------------------------------------------------------------------------------------------------------------+
   | key_pair_names     | No              | Array of strings | Name of the SSH key pair, which can be created and viewed on the **Key Pair** page of the Elastic Cloud Server (ECS) console. |
   +--------------------+-----------------+------------------+-------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_volumereq:

.. table:: **Table 4** VolumeReq

   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                 |
   +=================+=================+=================+=============================================================================================================================================================================================+
   | capacity        | No              | Integer         | Storage capacity. The default value is 5 GB for EVS. The maximum value is 4096 GB.                                                                                                          |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | category        | Yes             | String          | Supported storage types. For details about the differences between the storage types, see"Selecting Storage in DevEnviron" in *User Guide*. Enums:                                          |
   |                 |                 |                 |                                                                                                                                                                                             |
   |                 |                 |                 | -  **SFS**                                                                                                                                                                                  |
   |                 |                 |                 |                                                                                                                                                                                             |
   |                 |                 |                 | -  **EVS**                                                                                                                                                                                  |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ownership       | Yes             | String          | Owner to which the resource belongs. Enums:                                                                                                                                                 |
   |                 |                 |                 |                                                                                                                                                                                             |
   |                 |                 |                 | -  **MANAGED**: Resources are managed by the service.                                                                                                                                       |
   |                 |                 |                 |                                                                                                                                                                                             |
   |                 |                 |                 | -  **DEDICATED**: Resources are managed by the user account. This mode is supported only when the instance category is **EFS**.                                                             |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | uri             | No              | String          | Disk URI of the EFS. This parameter is mandatory only when the instance category is **EFS** and the ownership is **DEDICATED**.                                                             |
   |                 |                 |                 |                                                                                                                                                                                             |
   |                 |                 |                 | Log in to the SFS console. In the file system list, click the file system name to go to the file system details page. The shared path is the value of this parameter.                       |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id              | No              | String          | Disk ID of the EFS. This parameter is mandatory only when the instance category is **EFS** and the ownership is **DEDICATED**. This parameter is mandatory.                                 |
   |                 |                 |                 |                                                                                                                                                                                             |
   |                 |                 |                 | To obtain the parameter value, log in to the SFS console. In the file system list, click the file system name to go to the file system details page. **ID** is the value of this parameter. |
   +-----------------+-----------------+-----------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_customhooks:

.. table:: **Table 5** CustomHooks

   +-----------------+-----------+------------------------------------------------------------------------------------------------------------------+---------------------------------------+
   | Parameter       | Mandatory | Type                                                                                                             | Description                           |
   +=================+===========+==================================================================================================================+=======================================+
   | container_hooks | No        | :ref:`ContainerHooks <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_containerhooks>` object | Container-related hook configuration. |
   +-----------------+-----------+------------------------------------------------------------------------------------------------------------------+---------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_containerhooks:

.. table:: **Table 6** ContainerHooks

   +------------+-----------+--------------------------------------------------------------------------------------------------+----------------------------------------------------+
   | Parameter  | Mandatory | Type                                                                                             | Description                                        |
   +============+===========+==================================================================================================+====================================================+
   | post_start | No        | :ref:`Config <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_config>` object | Configure the script after the service is started. |
   +------------+-----------+--------------------------------------------------------------------------------------------------+----------------------------------------------------+
   | pre_start  | No        | :ref:`Config <en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_config>` object | Configure the script before starting the service.  |
   +------------+-----------+--------------------------------------------------------------------------------------------------+----------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_config:

.. table:: **Table 7** Config

   +-----------------+-----------------+-----------------+------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                            |
   +=================+=================+=================+========================================================================+
   | script          | No              | String          | User-defined script content (Base64 encoding) or absolute script path. |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------+
   | type            | No              | String          | Script type.                                                           |
   |                 |                 |                 |                                                                        |
   |                 |                 |                 | -  **COMMAND**: The script content (Base64-encoded) must be specified. |
   |                 |                 |                 |                                                                        |
   |                 |                 |                 | -  **SCRIPT** (default): The script path must be specified.            |
   +-----------------+-----------------+-----------------+------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_request_leasereq:

.. table:: **Table 8** LeaseReq

   +-----------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter | Mandatory | Type   | Description                                                                                                                                  |
   +===========+===========+========+==============================================================================================================================================+
   | duration  | No        | Long   | Indicates the running duration starting from the current time. After the running duration expires, the system automatically stops. Unit: ms. |
   +-----------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------------------+
   | type      | No        | String | Automatic stop type. The default value is timing.                                                                                            |
   +-----------+-----------+--------+----------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 9** Response body parameters

   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                                                    | Description                                                                                                                                           |
   +=======================+=========================================================================================================================+=======================================================================================================================================================+
   | action_progress       | Array of :ref:`JobProgress <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_jobprogress>` objects   | Instance initialization progress.                                                                                                                     |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | String                                                                                                                  | Instance description                                                                                                                                  |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | endpoints             | Array of :ref:`EndpointsRes <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_endpointsres>` objects | This section describes how to configure the local IDE (such as PyCharm and VS Code) or SSH client to remotely access a notebook instance through SSH. |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | fail_reason           | String                                                                                                                  | Instance failure cause                                                                                                                                |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | flavor                | String                                                                                                                  | Instance flavor                                                                                                                                       |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | String                                                                                                                  | Instance ID.                                                                                                                                          |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | image                 | :ref:`Image <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_image>` object                         | Instance image                                                                                                                                        |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | lease                 | :ref:`Lease <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_lease>` object                         | Countdown to automatic instance stop.                                                                                                                 |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                                                                                                                  | Instance name                                                                                                                                         |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | pool                  | :ref:`Pool <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_pool>` object                           | Basic information about the dedicated pool, which is returned by the instance created in the dedicated pool.                                          |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | String                                                                                                                  | Instance status. Options:                                                                                                                             |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **INIT**: The instance is being initialized.                                                                                                       |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **CREATING**: The instance is being created.                                                                                                       |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **STARTING**: The instance is starting.                                                                                                            |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **STOPPING**: The instance is being stopped.                                                                                                       |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **DELETING**: The instance is being deleted.                                                                                                       |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **RUNNING**: The instance is running.                                                                                                              |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **STOPPED**: The instance has been stopped.                                                                                                        |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **SNAPSHOTTING**: The image of the instance is being saved.                                                                                        |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **CREATE_FAILED**: Creating the instance failed.                                                                                                   |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **START_FAILED**: Starting the instance failed.                                                                                                    |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **DELETE_FAILED**: Deleting the instance failed.                                                                                                   |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **ERROR**: An error occurred.                                                                                                                      |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **DELETED**: The instance has been deleted.                                                                                                        |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **FROZEN**: The instance is frozen.                                                                                                                |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | token                 | String                                                                                                                  | Token information used for notebook authentication.                                                                                                   |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | url                   | String                                                                                                                  | URL for accessing the notebook instance                                                                                                               |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | volume                | :ref:`VolumeRes <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_volumeres>` object                 | Storage volume                                                                                                                                        |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | workspace_id          | String                                                                                                                  | Workspace ID. If no workspaces are available, the default value is **0**.                                                                             |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | feature               | String                                                                                                                  | Instance type. Options:                                                                                                                               |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **DEFAULT**: free CodeLab instance. You can create only one.                                                                                       |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | -  **NOTEBOOK**: billed instance.                                                                                                                     |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | billing_items         | Array of strings                                                                                                        | Type of a charging resource. Options:                                                                                                                 |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | STORAGE: Storage resources are charged.                                                                                                               |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | COMPUTE: Computing resources are charged.                                                                                                             |
   |                       |                                                                                                                         |                                                                                                                                                       |
   |                       |                                                                                                                         | ALL: all charging types                                                                                                                               |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+
   | user                  | :ref:`user <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_user>` object                           | Account information.                                                                                                                                  |
   +-----------------------+-------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_jobprogress:

.. table:: **Table 10** JobProgress

   +-----------------------+-----------------------+------------------------------------------------+
   | Parameter             | Type                  | Description                                    |
   +=======================+=======================+================================================+
   | notebook_id           | String                | Instance ID.                                   |
   +-----------------------+-----------------------+------------------------------------------------+
   | status                | String                | Job status in a specified step. Enums:         |
   |                       |                       |                                                |
   |                       |                       | -  **WAITING**: The job is awaiting.           |
   |                       |                       |                                                |
   |                       |                       | -  **PROCESSING**: The job is being processed. |
   |                       |                       |                                                |
   |                       |                       | -  **FAILED**: The job failed.                 |
   |                       |                       |                                                |
   |                       |                       | -  **COMPLETED**: The job is complete.         |
   +-----------------------+-----------------------+------------------------------------------------+
   | step                  | Integer               | Job step. Options:                             |
   |                       |                       |                                                |
   |                       |                       | -  **1**: Prepare storage.                     |
   |                       |                       |                                                |
   |                       |                       | -  **2**: Prepare compute resources.           |
   |                       |                       |                                                |
   |                       |                       | -  **3**: Configure the network.               |
   |                       |                       |                                                |
   |                       |                       | -  **4**: Initialize the instance.             |
   +-----------------------+-----------------------+------------------------------------------------+
   | step_description      | String                | Description of a step in a job.                |
   +-----------------------+-----------------------+------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_endpointsres:

.. table:: **Table 11** EndpointsRes

   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                                                                                                                             |
   +=======================+=======================+=========================================================================================================================================================================================================================================================================================+
   | allowed_access_ips    | Array of strings      | Whitelist of public IP addresses that are allowed to access the notebook instance through SSH. By default, all public IP addresses can access the notebook instance. If this parameter is specified, only the clients with the specified IP addresses can access the notebook instance. |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dev_service           | String                | Path for accessing the notebook instance. The enumerated values are as follows:                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                         |
   |                       |                       | -  **NOTEBOOK**: You can access notebook instances using HTTPS.                                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                         |
   |                       |                       | -  **SSH**: You can remotely access the notebook instance through SSH.                                                                                                                                                                                                                  |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | ssh_keys              | Array of strings      | List of SSH key pairs. You can set multiple key pairs to access an SSH instance at the same time.                                                                                                                                                                                       |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | service               | String                | Path for accessing the notebook instance. The enumerated values are as follows:                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                         |
   |                       |                       | -  **NOTEBOOK**: You can access notebook instances using HTTPS.                                                                                                                                                                                                                         |
   |                       |                       |                                                                                                                                                                                                                                                                                         |
   |                       |                       | -  **SSH**: You can remotely access the notebook instance through SSH.                                                                                                                                                                                                                  |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | uri                   | String                | Private IP address of the instance                                                                                                                                                                                                                                                      |
   +-----------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_image:

.. table:: **Table 12** Image

   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter              | Type                  | Description                                                                                                                                                                                                     |
   +========================+=======================+=================================================================================================================================================================================================================+
   | arch                   | String                | Processor architecture supported by the image. Enums:                                                                                                                                                           |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **X86_64**: x86 architecture                                                                                                                                                                                 |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **AARCH64**: Arm architecture                                                                                                                                                                                |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | create_at              | Long                  | Specifies the time (UTC ms) when the image is created.                                                                                                                                                          |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description            | String                | Image description with a maximum of 512 characters                                                                                                                                                              |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | dev_services           | Array of strings      | Services supported by the image. Enums:                                                                                                                                                                         |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **NOTEBOOK**: You can access a notebook instance using HTTPS.                                                                                                                                                |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **SSH**: You can remotely access a notebook instance from a local IDE through SSH.                                                                                                                           |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                     | String                | Specifies the image ID of the notebook instance to be created. The image ID is in the Universally Unique Identifier (UUID) format. For details about how to obtain the ID of a preset image, see ListImage.xml. |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                   | String                | Image name, which contains a maximum of 512 characters, including lowercase letters, digits, hyphens (-), underscores (_), and periods (.)                                                                      |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | namespace              | String                | Organization to which the image belongs. You can create and view the organization on the **Organization Management** page of the SWR console.                                                                   |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | origin                 | String                | Image source, which defaults to **CUSTOMIZE**. This parameter is optional. Enums:                                                                                                                               |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **CUSTOMIZE**: custom image                                                                                                                                                                                  |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **IMAGE_SAVE**: image saved by a notebook instance                                                                                                                                                           |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | resource_categories    | Array of strings      | Flavors supported by the image. Enums:                                                                                                                                                                          |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **CPU**                                                                                                                                                                                                      |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **GPU**                                                                                                                                                                                                      |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | service_type           | String                | Supported image types. Options:                                                                                                                                                                                 |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **COMMON**: common image                                                                                                                                                                                     |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **INFERENCE**: image used for inference                                                                                                                                                                      |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  TRAIN: image used for training                                                                                                                                                                               |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  DEV: image used for development and debugging                                                                                                                                                                |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  UNKNOWN: image whose supported services are not specified                                                                                                                                                    |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | size                   | Long                  | Specifies the image size, in KB.                                                                                                                                                                                |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                 | String                | Image status. Options:                                                                                                                                                                                          |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **INIT**: The image is being initialized.                                                                                                                                                                    |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **CREATING**: The image is being saved. In this case, the notebook instance is unavailable.                                                                                                                  |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **CREATE_FAILED**: Saving the image failed.                                                                                                                                                                  |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **ERROR**: An error occurs.                                                                                                                                                                                  |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **DELETED**: The image has been deleted.                                                                                                                                                                     |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **ACTIVE**: The image has been saved, which you can view on the SWR console and use to create notebook instances.                                                                                            |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status_message         | String                | Build information during image saving                                                                                                                                                                           |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | support_res_categories | Array of strings      | Flavors supported by the image. Enums:                                                                                                                                                                          |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **CPU**                                                                                                                                                                                                      |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **GPU**                                                                                                                                                                                                      |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | swr_path               | String                | SWR image address                                                                                                                                                                                               |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tag                    | String                | Image tag                                                                                                                                                                                                       |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                   | String                | Image type. Enums:                                                                                                                                                                                              |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **BUILD_IN**: built-in system image                                                                                                                                                                          |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **DEDICATED**: image you have saved                                                                                                                                                                          |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | update_at              | Long                  | Specifies the time (UTC ms) when the image was last updated.                                                                                                                                                    |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | visibility             | String                | Image visibility. Enums:                                                                                                                                                                                        |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **PRIVATE**: private image                                                                                                                                                                                   |
   |                        |                       |                                                                                                                                                                                                                 |
   |                        |                       | -  **PUBLIC**: All users can perform read-only operations based on the image ID.                                                                                                                                |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | workspace_id           | String                | Workspace ID. If no workspaces are available, the default value is **0**.                                                                                                                                       |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | flavor_type            | String                | Image resource type.                                                                                                                                                                                            |
   +------------------------+-----------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_lease:

.. table:: **Table 13** Lease

   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                                                                        |
   +=======================+=======================+====================================================================================================================================================================================================================+
   | create_at             | Long                  | Time (UTC) when the instance is created, accurate to millisecond.                                                                                                                                                  |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | duration              | Long                  | Instance running duration, which is calculated based on the instance creation time. If the instance creation time plus the duration is greater than the current time, the system automatically stops the instance. |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enable                | Boolean               | Whether to enable auto stop of the instance.                                                                                                                                                                       |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                | Indicates the automatic stop type.                                                                                                                                                                                 |
   |                       |                       |                                                                                                                                                                                                                    |
   |                       |                       | -  timing: The task is automatically stopped.                                                                                                                                                                      |
   |                       |                       |                                                                                                                                                                                                                    |
   |                       |                       | -  idle: The task is stopped when it is idle.                                                                                                                                                                      |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | update_at             | Long                  | Time when the instance is last updated (excluding the heartbeat detection time), in UTC milliseconds.                                                                                                              |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_pool:

.. table:: **Table 14** Pool

   ========= ====== =================================
   Parameter Type   Description
   ========= ====== =================================
   id        String ID of a dedicated resource pool
   name      String Name of a dedicated resource pool
   ========= ====== =================================

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_volumeres:

.. table:: **Table 15** VolumeRes

   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                        |
   +=======================+=======================+====================================================================================================================================================+
   | capacity              | Integer               | Storage capacity. The default value is 5 GB for EVS and 50 GB for EFS. The maximum value is 4096 GB.                                               |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | category              | String                | Supported storage types. For details about the differences between the storage types, see"Selecting Storage in DevEnviron" in *User Guide*. Enums: |
   |                       |                       |                                                                                                                                                    |
   |                       |                       | -  **SFS**                                                                                                                                         |
   |                       |                       |                                                                                                                                                    |
   |                       |                       | -  **EVS**                                                                                                                                         |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | mount_path            | String                | Directory of the notebook instance to which OBS storage is mounted. Currently, the directory is **/home/ma-user/work/**.                           |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | ownership             | String                | Owner to which the resource belongs. Enums:                                                                                                        |
   |                       |                       |                                                                                                                                                    |
   |                       |                       | -  **MANAGED**: Resources are managed by the service.                                                                                              |
   |                       |                       |                                                                                                                                                    |
   |                       |                       | -  **DEDICATED**: Resources are managed by the user account. This mode is supported only when the instance category is **EFS**.                    |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | String                | EVS disk capacity expansion status, which is **RESIZING** during capacity expansion and does not affect the instance.                              |
   +-----------------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_user:

.. table:: **Table 16** user

   +-----------+---------------------------------------------------------------------------------------------------+-----------------------------+
   | Parameter | Type                                                                                              | Description                 |
   +===========+===================================================================================================+=============================+
   | domain    | :ref:`domain <en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_domain>` object | Account domain information. |
   +-----------+---------------------------------------------------------------------------------------------------+-----------------------------+
   | id        | String                                                                                            | IAM user ID.                |
   +-----------+---------------------------------------------------------------------------------------------------+-----------------------------+
   | name      | String                                                                                            | IAM username.               |
   +-----------+---------------------------------------------------------------------------------------------------+-----------------------------+

.. _en-us_topic_0000002268726213__en-us_topic_0000002055322398_response_domain:

.. table:: **Table 17** domain

   ========= ====== =============
   Parameter Type   Description
   ========= ====== =============
   id        String Account ID.
   name      String Account name.
   ========= ====== =============

Example Requests
----------------

The following is an example of how to create a notebook instance whose flavor is **modelarts.vm.cpu.2u**, storage type is **evs**, ownership is **MANAGED**, and storage capacity is 50 GB.

.. code-block::

   {
     "name" : "notebooks_test",
     "feature" : "NOTEBOOK",
     "workspace_id" : "0",
     "description" : "api-test",
     "flavor" : "modelarts.vm.cpu.2u",
     "image_id" : "e1a07296-22a8-4f05-8bc8-e936c8e54090",
     "volume" : {
       "category" : "evs",
       "ownership" : "managed",
       "capacity" : 50
     }
   }

Example Responses
-----------------

**Status code: 200**

OK

.. code-block::

   {
     "description" : "api-test",
     "feature" : "NOTEBOOK",
     "flavor" : "modelarts.vm.cpu.2u",
     "id" : "f9937afa-4451-42db-a76b-72d624749f66",
     "image" : {
       "description" : "description",
       "id" : "e1a07296-22a8-4f05-8bc8-e936c8e54090",
       "name" : "notebook2.0-mul-kernel-cpu-cp36",
       "swr_path" : "swr.xxxxx.com/atelier/notebook2.0-mul-kernel-cpu-cp36:3.3.2-release_v1",
       "tag" : "3.3.2-release_v1",
       "type" : "BUILD_IN"
     },
     "lease" : {
       "create_at" : 1638841744515,
       "duration" : 3600000,
       "enable" : true,
       "type" : "TIMING",
       "update_at" : 1638841744515
     },
     "name" : "notebooks_test",
     "status" : "CREATING",
     "token" : "3eff13f2-3d70-5456-6dc7-e3f99f562022",
     "workspace_id" : "0"
   }

Status Codes
------------

=========== ============
Status Code Description
=========== ============
200         OK
201         Created
401         Unauthorized
403         Forbidden
404         Not Found
=========== ============

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
