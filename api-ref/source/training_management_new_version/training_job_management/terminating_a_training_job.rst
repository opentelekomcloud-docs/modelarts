:original_name: StopTrainingJob.html

.. _StopTrainingJob:

Terminating a Training Job
==========================

Function
--------

This API is used to terminate a training job. Only jobs in the **Creating**, **Waiting**, or **Running** state can be terminated.

URI
---

POST /v2/{project_id}/training-jobs/{training_job_id}/actions

.. table:: **Table 1** Path Parameters

   +-----------------+-----------+--------+---------------------------------------------------------------------------------+
   | Parameter       | Mandatory | Type   | Description                                                                     |
   +=================+===========+========+=================================================================================+
   | project_id      | Yes       | String | Project ID. For details, see :ref:`Obtaining a Project ID <modelarts_03_0147>`. |
   +-----------------+-----------+--------+---------------------------------------------------------------------------------+
   | training_job_id | Yes       | String | ID of a training job.                                                           |
   +-----------------+-----------+--------+---------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 2** Request body parameters

   +-------------+-----------+--------+------------------------------------------------------------------------------------------+
   | Parameter   | Mandatory | Type   | Description                                                                              |
   +=============+===========+========+==========================================================================================+
   | action_type | No        | String | Operation performed on a training job. Select **terminate** to terminate a training job. |
   +-------------+-----------+--------+------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 202**

.. table:: **Table 3** Response body parameters

   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                                                                                | Description                                                                                           |
   +=======================+=====================================================================================+=======================================================================================================+
   | kind                  | String                                                                              | Training job type, which is **job** by default. Options:                                              |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **job**: Training job                                                                              |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **hetero_job**: Heterogeneous job                                                                  |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **autosearch_job**: Auto search job                                                                |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **mrs_job**: MRS job [- **edge_job**: Edge job] (tag:hk,hc,fcs,fcs-super)                          |
   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
   | metadata              | :ref:`JobMetadata <stoptrainingjob__response_jobmetadata>` object                   | Metadata of a training job.                                                                           |
   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
   | status                | :ref:`Status <stoptrainingjob__response_status>` object                             | Status of a training job. You do not need to set this parameter when creating a job.                  |
   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
   | algorithm             | :ref:`JobAlgorithmResponse <stoptrainingjob__response_jobalgorithmresponse>` object | Algorithm for training jobs. The following formats are supported:                                     |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **id**: Only the algorithm ID is used.                                                             |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **subscription_id+item_version_id**: The subscription ID and version ID of the algorithm are used. |
   |                       |                                                                                     |                                                                                                       |
   |                       |                                                                                     | -  **code_dir+boot_file**: The code directory and boot file of a training job are used.               |
   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
   | tasks                 | Array of :ref:`TaskResponse <stoptrainingjob__response_taskresponse>` objects       | List of tasks in heterogeneous training jobs.                                                         |
   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+
   | spec                  | :ref:`spec <stoptrainingjob__response_spec>` object                                 | Specifications of a training job.                                                                     |
   +-----------------------+-------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_jobmetadata:

.. table:: **Table 4** JobMetadata

   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter    | Type               | Description                                                                                                                                                                     |
   +==============+====================+=================================================================================================================================================================================+
   | id           | String             | Training job ID, which is generated and returned by ModelArts after the training job is created.                                                                                |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name         | String             | Name of a training job. The value must contain 1 to 64 characters consisting of only digits, letters, underscores (_), and hyphens (-).                                         |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | workspace_id | String             | Workspace where a job is located. The default value is **0**.                                                                                                                   |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description  | String             | Training job description. The value must contain 0 to 256 characters. The default value is **NULL**.                                                                            |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | create_time  | Long               | Timestamp when a training job is created, in milliseconds. The value is generated and returned by ModelArts after the job is created.                                           |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | user_name    | String             | Username for creating a training job. The username is generated and returned by ModelArts after the training job is created.                                                    |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | annotations  | Map<String,String> | Declaration template of a training job. For heterogeneous jobs, the default value of **job_template** is **Template RL**. For other jobs, the default value is **Template DL**. |
   +--------------+--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_status:

.. table:: **Table 5** Status

   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter          | Type                                                                            | Description                                                                                                                                                                                                                                  |
   +====================+=================================================================================+==============================================================================================================================================================================================================================================+
   | phase              | String                                                                          | Level-1 status of a training job. The value is stable. The options are as follows: **Creating** **Pending** **Running** **Failed** **Completed**, **Terminating** **Terminated** **Abnormal**                                                |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | secondary_phase    | String                                                                          | Level-2 status of a training job. The value is unstable. The options are as follows: **Creating** **Queuing** **Running** **Failed** **Completed** **Terminating** **Terminated** **CreateFailed** **TerminatedFailed** **Unknown** **Lost** |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | duration           | Long                                                                            | Running duration of a training job, in milliseconds                                                                                                                                                                                          |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | node_count_metrics | Array<Array<Integer>>                                                           | Node count changes during the training job running period.                                                                                                                                                                                   |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tasks              | Array of strings                                                                | Tasks of a training job.                                                                                                                                                                                                                     |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | start_time         | String                                                                          | Start time of a training job. The value is in timestamp format.                                                                                                                                                                              |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | task_statuses      | Array of :ref:`task_statuses <stoptrainingjob__response_task_statuses>` objects | Status of a training job task.                                                                                                                                                                                                               |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_task_statuses:

.. table:: **Table 6** task_statuses

   ========= ======= =====================================
   Parameter Type    Description
   ========= ======= =====================================
   task      String  Name of a training job task.
   exit_code Integer Exit code of a training job task.
   message   String  Error message of a training job task.
   ========= ======= =====================================

.. _stoptrainingjob__response_jobalgorithmresponse:

.. table:: **Table 7** JobAlgorithmResponse

   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter                 | Type                                                                    | Description                                                                                                                                                                                                                                      |
   +===========================+=========================================================================+==================================================================================================================================================================================================================================================+
   | id                        | String                                                                  | Algorithm for training jobs. Options:                                                                                                                                                                                                            |
   |                           |                                                                         |                                                                                                                                                                                                                                                  |
   |                           |                                                                         | -  **id**: Only the algorithm ID is used.                                                                                                                                                                                                        |
   |                           |                                                                         |                                                                                                                                                                                                                                                  |
   |                           |                                                                         | -  **subscription_id+item_version_id**: The subscription ID and version ID of the algorithm are used.                                                                                                                                            |
   |                           |                                                                         |                                                                                                                                                                                                                                                  |
   |                           |                                                                         | -  **code_dir+boot_file**: The code directory and boot file of a training job are used.                                                                                                                                                          |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                      | String                                                                  | Algorithm name.                                                                                                                                                                                                                                  |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | subscription_id           | String                                                                  | Subscription ID of the subscription algorithm. This parameter must be used together with **item_version_id**.                                                                                                                                    |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | item_version_id           | String                                                                  | Version ID of the subscription algorithm. This parameter must be used together with **subscription_id**.                                                                                                                                         |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | code_dir                  | String                                                                  | Code directory of a training job, for example, **/usr/app/**. This parameter must be used together with **boot_file**. If **id** or **subscription_id+item_version_id** is set, leave it blank.                                                  |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | boot_file                 | String                                                                  | Boot file of a training job, which needs to be stored in the code directory, for example, **/usr/app/boot.py**. This parameter must be used together with **code_dir**. If **id** or **subscription_id+item_version_id** is set, leave it blank. |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | autosearch_config_path    | String                                                                  | YAML configuration path of auto search jobs. An OBS URL is required.                                                                                                                                                                             |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | autosearch_framework_path | String                                                                  | Framework code directory of auto search jobs. An OBS URL is required.                                                                                                                                                                            |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | command                   | String                                                                  | Boot command used to start the container of the custom image used by a training job. You can set this parameter to **code_dir**.                                                                                                                 |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | parameters                | Array of :ref:`Parameter <stoptrainingjob__response_parameter>` objects | Running parameters of a training job.                                                                                                                                                                                                            |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | policies                  | :ref:`policies <stoptrainingjob__response_policies>` object             | Policies supported by jobs.                                                                                                                                                                                                                      |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | inputs                    | Array of :ref:`Input <stoptrainingjob__response_input>` objects         | Input of a training job.                                                                                                                                                                                                                         |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | outputs                   | Array of :ref:`Output <stoptrainingjob__response_output>` objects       | Output of a training job.                                                                                                                                                                                                                        |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | engine                    | :ref:`engine <stoptrainingjob__response_engine>` object                 | Engine of a training job. Leave this parameter blank if the job is created using **id** of the algorithm management API or **subscription_id+item_version_id** of the subscription algorithm API.                                                |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | environments              | Array of Map<String,String> objects                                     | Environment variables of a training job. The format is **key: value**. Leave this parameter blank.                                                                                                                                               |
   +---------------------------+-------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_parameter:

.. table:: **Table 8** Parameter

   +------------------+-----------------------------------------------------------------------------+-----------------------------------+
   | Parameter        | Type                                                                        | Description                       |
   +==================+=============================================================================+===================================+
   | name             | String                                                                      | Parameter name.                   |
   +------------------+-----------------------------------------------------------------------------+-----------------------------------+
   | value            | String                                                                      | Parameter value.                  |
   +------------------+-----------------------------------------------------------------------------+-----------------------------------+
   | description      | String                                                                      | Parameter description.            |
   +------------------+-----------------------------------------------------------------------------+-----------------------------------+
   | constraint       | :ref:`constraint <stoptrainingjob__response_constraint>` object             | Parameter constraint.             |
   +------------------+-----------------------------------------------------------------------------+-----------------------------------+
   | i18n_description | :ref:`i18n_description <stoptrainingjob__response_i18n_description>` object | Internationalization description. |
   +------------------+-----------------------------------------------------------------------------+-----------------------------------+

.. _stoptrainingjob__response_constraint:

.. table:: **Table 9** constraint

   =========== ================ ===================================
   Parameter   Type             Description
   =========== ================ ===================================
   type        String           Parameter type.
   editable    Boolean          Whether the parameter is editable.
   required    Boolean          Whether the parameter is mandatory.
   sensitive   Boolean          Whether the parameter is sensitive.
   valid_type  String           Valid type.
   valid_range Array of strings Valid range.
   =========== ================ ===================================

.. _stoptrainingjob__response_i18n_description:

.. table:: **Table 10** i18n_description

   =========== ====== ==============================
   Parameter   Type   Description
   =========== ====== ==============================
   language    String Internationalization language.
   description String Description.
   =========== ====== ==============================

.. _stoptrainingjob__response_policies:

.. table:: **Table 11** policies

   +-------------+-------------------------------------------------------------------+--------------------------------------+
   | Parameter   | Type                                                              | Description                          |
   +=============+===================================================================+======================================+
   | auto_search | :ref:`auto_search <stoptrainingjob__response_auto_search>` object | Hyperparameter search configuration. |
   +-------------+-------------------------------------------------------------------+--------------------------------------+

.. _stoptrainingjob__response_auto_search:

.. table:: **Table 12** auto_search

   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------+
   | Parameter          | Type                                                                            | Description                                        |
   +====================+=================================================================================+====================================================+
   | skip_search_params | String                                                                          | Hyperparameter parameters that need to be skipped. |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------+
   | reward_attrs       | Array of :ref:`reward_attrs <stoptrainingjob__response_reward_attrs>` objects   | List of search metrics.                            |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------+
   | search_params      | Array of :ref:`search_params <stoptrainingjob__response_search_params>` objects | Search parameters.                                 |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------+
   | algo_configs       | Array of :ref:`algo_configs <stoptrainingjob__response_algo_configs>` objects   | Search algorithm configurations.                   |
   +--------------------+---------------------------------------------------------------------------------+----------------------------------------------------+

.. _stoptrainingjob__response_reward_attrs:

.. table:: **Table 13** reward_attrs

   +-----------------------+-----------------------+------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                      |
   +=======================+=======================+==================================================================+
   | name                  | String                | Metric name.                                                     |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | mode                  | String                | Search direction.                                                |
   |                       |                       |                                                                  |
   |                       |                       | -  **max**: A larger metric value indicates better performance.  |
   |                       |                       |                                                                  |
   |                       |                       | -  **min**: A smaller metric value indicates better performance. |
   +-----------------------+-----------------------+------------------------------------------------------------------+
   | regex                 | String                | Regular expression of a metric.                                  |
   +-----------------------+-----------------------+------------------------------------------------------------------+

.. _stoptrainingjob__response_search_params:

.. table:: **Table 14** search_params

   +-----------------------+-----------------------+-----------------------------------------------------------+
   | Parameter             | Type                  | Description                                               |
   +=======================+=======================+===========================================================+
   | name                  | String                | Hyperparameter name.                                      |
   +-----------------------+-----------------------+-----------------------------------------------------------+
   | param_type            | String                | Parameter type.                                           |
   |                       |                       |                                                           |
   |                       |                       | -  **continuous**: The parameter is a continuous value.   |
   |                       |                       |                                                           |
   |                       |                       | -  **discreate**: The parameter is a discrete value.      |
   +-----------------------+-----------------------+-----------------------------------------------------------+
   | lower_bound           | String                | Lower bound of the hyperparameter.                        |
   +-----------------------+-----------------------+-----------------------------------------------------------+
   | upper_bound           | String                | Upper bound of the hyperparameter.                        |
   +-----------------------+-----------------------+-----------------------------------------------------------+
   | discrete_points_num   | String                | Number of discrete points of a continuous hyperparameter. |
   +-----------------------+-----------------------+-----------------------------------------------------------+
   | discrete_values       | Array of strings      | List of discrete hyperparameter values.                   |
   +-----------------------+-----------------------+-----------------------------------------------------------+

.. _stoptrainingjob__response_algo_configs:

.. table:: **Table 15** algo_configs

   +-----------+-----------------------------------------------------------------------------------------------------------------+-------------------------------+
   | Parameter | Type                                                                                                            | Description                   |
   +===========+=================================================================================================================+===============================+
   | name      | String                                                                                                          | Name of the search algorithm. |
   +-----------+-----------------------------------------------------------------------------------------------------------------+-------------------------------+
   | params    | Array of :ref:`AutoSearchAlgoConfigParameter <stoptrainingjob__response_autosearchalgoconfigparameter>` objects | Search algorithm parameters.  |
   +-----------+-----------------------------------------------------------------------------------------------------------------+-------------------------------+

.. _stoptrainingjob__response_autosearchalgoconfigparameter:

.. table:: **Table 16** AutoSearchAlgoConfigParameter

   ========= ====== ================
   Parameter Type   Description
   ========= ====== ================
   key       String Parameter key.
   value     String Parameter value.
   type      String Parameter type.
   ========= ====== ================

.. _stoptrainingjob__response_input:

.. table:: **Table 17** Input

   +-----------------------+-----------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | Parameter             | Type                                                                                    | Description                                                                 |
   +=======================+=========================================================================================+=============================================================================+
   | name                  | String                                                                                  | Name of the data input channel.                                             |
   +-----------------------+-----------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | description           | String                                                                                  | Description of the data input channel.                                      |
   +-----------------------+-----------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | local_dir             | String                                                                                  | Local directory of the container to which the data input channel is mapped. |
   +-----------------------+-----------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | remote                | :ref:`InputDataInfo <stoptrainingjob__response_inputdatainfo>` object                   | Data input. Options:                                                        |
   |                       |                                                                                         |                                                                             |
   |                       |                                                                                         | -  **dataset**: Dataset as the data input                                   |
   |                       |                                                                                         |                                                                             |
   |                       |                                                                                         | -  **obs**: OBS path as the data input                                      |
   +-----------------------+-----------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+
   | remote_constraint     | Array of :ref:`remote_constraint <stoptrainingjob__response_remote_constraint>` objects | Data input constraint.                                                      |
   +-----------------------+-----------------------------------------------------------------------------------------+-----------------------------------------------------------------------------+

.. _stoptrainingjob__response_inputdatainfo:

.. table:: **Table 18** InputDataInfo

   +-----------+-----------------------------------------------------------+--------------------------------------------+
   | Parameter | Type                                                      | Description                                |
   +===========+===========================================================+============================================+
   | dataset   | :ref:`dataset <stoptrainingjob__response_dataset>` object | Dataset as the data input.                 |
   +-----------+-----------------------------------------------------------+--------------------------------------------+
   | obs       | :ref:`obs <stoptrainingjob__response_obs>` object         | OBS in which data input and output stored. |
   +-----------+-----------------------------------------------------------+--------------------------------------------+

.. _stoptrainingjob__response_dataset:

.. table:: **Table 19** dataset

   +------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter  | Type   | Description                                                                                                                                                                        |
   +============+========+====================================================================================================================================================================================+
   | id         | String | Dataset ID of a training job.                                                                                                                                                      |
   +------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | version_id | String | Dataset version ID of a training job.                                                                                                                                              |
   +------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | obs_url    | String | OBS URL of the dataset required by a training job. ModelArts automatically parses and generates the URL based on the dataset and dataset version IDs. For example, **/usr/data/**. |
   +------------+--------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_obs:

.. table:: **Table 20** obs

   +-----------+--------+---------------------------------------------------------------------------------+
   | Parameter | Type   | Description                                                                     |
   +===========+========+=================================================================================+
   | obs_url   | String | OBS URL of the dataset required by a training job. For example, **/usr/data/**. |
   +-----------+--------+---------------------------------------------------------------------------------+

.. _stoptrainingjob__response_remote_constraint:

.. table:: **Table 21** remote_constraint

   +-----------------------+-----------------------+-------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                       |
   +=======================+=======================+===================================================================+
   | data_type             | String                | Data input type, including the data storage location and dataset. |
   +-----------------------+-----------------------+-------------------------------------------------------------------+
   | attributes            | String                | Attributes if a dataset is used as the data input. Options:       |
   |                       |                       |                                                                   |
   |                       |                       | -  **data_format**: Data format                                   |
   |                       |                       |                                                                   |
   |                       |                       | -  **data_segmentation**: Data segmentation                       |
   |                       |                       |                                                                   |
   |                       |                       | -  **dataset_type**: Labeling type                                |
   +-----------------------+-----------------------+-------------------------------------------------------------------+

.. _stoptrainingjob__response_output:

.. table:: **Table 22** Output

   +-------------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | Parameter   | Type                                                    | Description                                                                  |
   +=============+=========================================================+==============================================================================+
   | name        | String                                                  | Name of the data output channel.                                             |
   +-------------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | description | String                                                  | Description of the data output channel.                                      |
   +-------------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | local_dir   | String                                                  | Local directory of the container to which the data output channel is mapped. |
   +-------------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | remote      | :ref:`remote <stoptrainingjob__response_remote>` object | Description of the actual data output.                                       |
   +-------------+---------------------------------------------------------+------------------------------------------------------------------------------+

.. _stoptrainingjob__response_remote:

.. table:: **Table 23** remote

   +-----------+---------------------------------------------------+-----------------------------------------+
   | Parameter | Type                                              | Description                             |
   +===========+===================================================+=========================================+
   | obs       | :ref:`obs <stoptrainingjob__response_obs>` object | OBS to which data is actually exported. |
   +-----------+---------------------------------------------------+-----------------------------------------+

.. table:: **Table 24** obs

   ========= ====== ===========================================
   Parameter Type   Description
   ========= ====== ===========================================
   obs_url   String OBS URL to which data is actually exported.
   ========= ====== ===========================================

.. _stoptrainingjob__response_engine:

.. table:: **Table 25** engine

   +----------------+--------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter      | Type   | Description                                                                                                                             |
   +================+========+=========================================================================================================================================+
   | engine_id      | String | Engine ID selected for a training job. You can set this parameter to **engine_id**, **engine_name + engine_version**, or **image_url**. |
   +----------------+--------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | engine_name    | String | Name of the engine selected for a training job. If **engine_id** is set, leave this parameter blank.                                    |
   +----------------+--------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | engine_version | String | Name of the engine version selected for a training job. If **engine_id** is set, leave this parameter blank.                            |
   +----------------+--------+-----------------------------------------------------------------------------------------------------------------------------------------+
   | image_url      | String | Custom image URL selected for a training job.                                                                                           |
   +----------------+--------+-----------------------------------------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_taskresponse:

.. table:: **Table 26** TaskResponse

   +-----------------------+-------------------------------------------------------------------------+------------------------------------------------+
   | Parameter             | Type                                                                    | Description                                    |
   +=======================+=========================================================================+================================================+
   | role                  | String                                                                  | Role of a heterogeneous training job. Options: |
   |                       |                                                                         |                                                |
   |                       |                                                                         | -  **learner**: supports GPUs or CPUs.         |
   |                       |                                                                         |                                                |
   |                       |                                                                         | -  **worker**: supports CPUs.                  |
   +-----------------------+-------------------------------------------------------------------------+------------------------------------------------+
   | algorithm             | :ref:`algorithm <stoptrainingjob__response_algorithm>` object           | Algorithm management and configuration.        |
   +-----------------------+-------------------------------------------------------------------------+------------------------------------------------+
   | task_resource         | :ref:`FlavorResponse <stoptrainingjob__response_flavorresponse>` object | Flavors of a training job or an algorithm.     |
   +-----------------------+-------------------------------------------------------------------------+------------------------------------------------+

.. _stoptrainingjob__response_algorithm:

.. table:: **Table 27** algorithm

   +-----------+-----------------------------------------------------------+-------------------------------------------------------------------------+
   | Parameter | Type                                                      | Description                                                             |
   +===========+===========================================================+=========================================================================+
   | code_dir  | String                                                    | Absolute path of the directory where the algorithm boot file is stored. |
   +-----------+-----------------------------------------------------------+-------------------------------------------------------------------------+
   | boot_file | String                                                    | Absolute path of the algorithm boot file.                               |
   +-----------+-----------------------------------------------------------+-------------------------------------------------------------------------+
   | inputs    | :ref:`inputs <stoptrainingjob__response_inputs>` object   | Algorithm input channel.                                                |
   +-----------+-----------------------------------------------------------+-------------------------------------------------------------------------+
   | outputs   | :ref:`outputs <stoptrainingjob__response_outputs>` object | Algorithm output channel.                                               |
   +-----------+-----------------------------------------------------------+-------------------------------------------------------------------------+
   | engine    | :ref:`engine <stoptrainingjob__response_engine>` object   | Engine on which a heterogeneous job depends.                            |
   +-----------+-----------------------------------------------------------+-------------------------------------------------------------------------+

.. _stoptrainingjob__response_inputs:

.. table:: **Table 28** inputs

   +-----------+---------------------------------------------------------+-------------------------------------------------------------------------------------+
   | Parameter | Type                                                    | Description                                                                         |
   +===========+=========================================================+=====================================================================================+
   | name      | String                                                  | Name of the data input channel.                                                     |
   +-----------+---------------------------------------------------------+-------------------------------------------------------------------------------------+
   | local_dir | String                                                  | Local path of the container to which the data input and output channels are mapped. |
   +-----------+---------------------------------------------------------+-------------------------------------------------------------------------------------+
   | remote    | :ref:`remote <stoptrainingjob__response_remote>` object | Actual data input. Heterogeneous jobs support only OBS.                             |
   +-----------+---------------------------------------------------------+-------------------------------------------------------------------------------------+

.. table:: **Table 29** remote

   +-----------+---------------------------------------------------+--------------------------------------------+
   | Parameter | Type                                              | Description                                |
   +===========+===================================================+============================================+
   | obs       | :ref:`obs <stoptrainingjob__response_obs>` object | OBS in which data input and output stored. |
   +-----------+---------------------------------------------------+--------------------------------------------+

.. table:: **Table 30** obs

   +-----------+--------+---------------------------------------------------------------------------------+
   | Parameter | Type   | Description                                                                     |
   +===========+========+=================================================================================+
   | obs_url   | String | OBS URL of the dataset required by a training job. For example, **/usr/data/**. |
   +-----------+--------+---------------------------------------------------------------------------------+

.. _stoptrainingjob__response_outputs:

.. table:: **Table 31** outputs

   +-----------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | Parameter | Type                                                    | Description                                                                  |
   +===========+=========================================================+==============================================================================+
   | name      | String                                                  | Name of the data output channel.                                             |
   +-----------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | local_dir | String                                                  | Local directory of the container to which the data output channel is mapped. |
   +-----------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | remote    | :ref:`remote <stoptrainingjob__response_remote>` object | Description of the actual data output.                                       |
   +-----------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | mode      | String                                                  | Data transmission mode. The default value is **upload_periodically**.        |
   +-----------+---------------------------------------------------------+------------------------------------------------------------------------------+
   | period    | String                                                  | Data transmission period. The default value is **30s**.                      |
   +-----------+---------------------------------------------------------+------------------------------------------------------------------------------+

.. table:: **Table 32** remote

   +-----------+---------------------------------------------------+-----------------------------------------+
   | Parameter | Type                                              | Description                             |
   +===========+===================================================+=========================================+
   | obs       | :ref:`obs <stoptrainingjob__response_obs>` object | OBS to which data is actually exported. |
   +-----------+---------------------------------------------------+-----------------------------------------+

.. table:: **Table 33** obs

   ========= ====== ===========================================
   Parameter Type   Description
   ========= ====== ===========================================
   obs_url   String OBS URL to which data is actually exported.
   ========= ====== ===========================================

.. table:: **Table 34** engine

   +----------------+---------+---------------------------------------------------------------------------+
   | Parameter      | Type    | Description                                                               |
   +================+=========+===========================================================================+
   | engine_id      | String  | Engine ID of a heterogeneous job, for example, **caffe-1.0.0-python2.7**. |
   +----------------+---------+---------------------------------------------------------------------------+
   | engine_name    | String  | Engine name of a heterogeneous job, for example, **Caffe**.               |
   +----------------+---------+---------------------------------------------------------------------------+
   | engine_version | String  | Engine version of a heterogeneous job.                                    |
   +----------------+---------+---------------------------------------------------------------------------+
   | v1_compatible  | Boolean | Whether the v1 compatibility mode is used.                                |
   +----------------+---------+---------------------------------------------------------------------------+
   | run_user       | String  | User UID started by default by the engine.                                |
   +----------------+---------+---------------------------------------------------------------------------+
   | image_url      | String  | Custom image URL selected by an algorithm.                                |
   +----------------+---------+---------------------------------------------------------------------------+

.. _stoptrainingjob__response_flavorresponse:

.. table:: **Table 35** FlavorResponse

   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | Parameter             | Type                                                              | Description                                   |
   +=======================+===================================================================+===============================================+
   | flavor_id             | String                                                            | ID of the resource flavor.                    |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | flavor_name           | String                                                            | Name of the resource flavor.                  |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | max_num               | Integer                                                           | Maximum number of nodes in a resource flavor. |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | flavor_type           | String                                                            | Resource flavor type. Options:                |
   |                       |                                                                   |                                               |
   |                       |                                                                   | -  **CPU**                                    |
   |                       |                                                                   |                                               |
   |                       |                                                                   | -  **GPU**                                    |
   |                       |                                                                   |                                               |
   |                       |                                                                   | -  **Ascend**                                 |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | billing               | :ref:`billing <stoptrainingjob__response_billing>` object         | Billing information of a resource flavor.     |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | flavor_info           | :ref:`flavor_info <stoptrainingjob__response_flavor_info>` object | Resource flavor details.                      |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+
   | attributes            | Map<String,String>                                                | Other specification attributes.               |
   +-----------------------+-------------------------------------------------------------------+-----------------------------------------------+

.. _stoptrainingjob__response_billing:

.. table:: **Table 36** billing

   ========= ======= ========================
   Parameter Type    Description
   ========= ======= ========================
   code      String  Billing code.
   unit_num  Integer Number of billing units.
   ========= ======= ========================

.. _stoptrainingjob__response_flavor_info:

.. table:: **Table 37** flavor_info

   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | Parameter | Type                                                    | Description                                                                                                         |
   +===========+=========================================================+=====================================================================================================================+
   | max_num   | Integer                                                 | Maximum number of nodes that can be selected. The value **1** indicates that the distributed mode is not supported. |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | cpu       | :ref:`cpu <stoptrainingjob__response_cpu>` object       | CPU specifications.                                                                                                 |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | gpu       | :ref:`gpu <stoptrainingjob__response_gpu>` object       | GPU specifications.                                                                                                 |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | npu       | :ref:`npu <stoptrainingjob__response_npu>` object       | Ascend flavors.                                                                                                     |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | memory    | :ref:`memory <stoptrainingjob__response_memory>` object | Memory information.                                                                                                 |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_cpu:

.. table:: **Table 38** cpu

   ========= ======= =================
   Parameter Type    Description
   ========= ======= =================
   arch      String  CPU architecture.
   core_num  Integer Number of cores.
   ========= ======= =================

.. _stoptrainingjob__response_gpu:

.. table:: **Table 39** gpu

   ============ ======= ===============
   Parameter    Type    Description
   ============ ======= ===============
   unit_num     Integer Number of GPUs.
   product_nume String  Product name.
   memory       String  Memory.
   ============ ======= ===============

.. _stoptrainingjob__response_npu:

.. table:: **Table 40** npu

   ============ ====== ===============
   Parameter    Type   Description
   ============ ====== ===============
   unit_num     String Number of NPUs.
   product_name String Product name.
   memory       String Memory.
   ============ ====== ===============

.. _stoptrainingjob__response_memory:

.. table:: **Table 41** memory

   ========= ======= =======================
   Parameter Type    Description
   ========= ======= =======================
   size      Integer Memory size.
   unit      String  Number of memory units.
   ========= ======= =======================

.. _stoptrainingjob__response_spec:

.. table:: **Table 42** spec

   +-----------------+---------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | Parameter       | Type                                                                      | Description                                                                                 |
   +=================+===========================================================================+=============================================================================================+
   | resource        | :ref:`Resource <stoptrainingjob__response_resource>` object               | Resource flavors of a training job. Select either **flavor_id** or **pool_id+[flavor_id]**. |
   +-----------------+---------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | volumes         | Array of :ref:`volumes <stoptrainingjob__response_volumes>` objects       | Volumes attached to a training job.                                                         |
   +-----------------+---------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+
   | log_export_path | :ref:`log_export_path <stoptrainingjob__response_log_export_path>` object | Export path of training job logs.                                                           |
   +-----------------+---------------------------------------------------------------------------+---------------------------------------------------------------------------------------------+

.. _stoptrainingjob__response_resource:

.. table:: **Table 43** Resource

   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+
   | Parameter             | Type                                                                  | Description                                                             |
   +=======================+=======================================================================+=========================================================================+
   | policy                | String                                                                | Resource flavor of a training job. Options: **regular**                 |
   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+
   | flavor_id             | String                                                                | Resource flavor ID of a training job.                                   |
   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+
   | flavor_name           | String                                                                | Read-only flavor name returned by ModelArts when **flavor_id** is used. |
   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+
   | node_count            | Integer                                                               | Number of resource replicas selected for a training job.                |
   |                       |                                                                       |                                                                         |
   |                       |                                                                       | Minimum: **1**                                                          |
   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+
   | pool_id               | String                                                                | Resource pool ID selected for a training job.                           |
   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+
   | flavor_detail         | :ref:`flavor_detail <stoptrainingjob__response_flavor_detail>` object | Flavors of a training job or an algorithm.                              |
   +-----------------------+-----------------------------------------------------------------------+-------------------------------------------------------------------------+

.. _stoptrainingjob__response_flavor_detail:

.. table:: **Table 44** flavor_detail

   +-----------------------+-------------------------------------------------------------------+-------------------------------------------+
   | Parameter             | Type                                                              | Description                               |
   +=======================+===================================================================+===========================================+
   | flavor_type           | String                                                            | Resource flavor type. Options:            |
   |                       |                                                                   |                                           |
   |                       |                                                                   | -  **CPU**                                |
   |                       |                                                                   |                                           |
   |                       |                                                                   | -  **GPU**                                |
   |                       |                                                                   |                                           |
   |                       |                                                                   | -  **Ascend**                             |
   +-----------------------+-------------------------------------------------------------------+-------------------------------------------+
   | billing               | :ref:`billing <stoptrainingjob__response_billing>` object         | Billing information of a resource flavor. |
   +-----------------------+-------------------------------------------------------------------+-------------------------------------------+
   | flavor_info           | :ref:`flavor_info <stoptrainingjob__response_flavor_info>` object | Resource flavor details.                  |
   +-----------------------+-------------------------------------------------------------------+-------------------------------------------+

.. table:: **Table 45** billing

   ========= ======= ========================
   Parameter Type    Description
   ========= ======= ========================
   code      String  Billing code.
   unit_num  Integer Number of billing units.
   ========= ======= ========================

.. table:: **Table 46** flavor_info

   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | Parameter | Type                                                    | Description                                                                                                         |
   +===========+=========================================================+=====================================================================================================================+
   | max_num   | Integer                                                 | Maximum number of nodes that can be selected. The value **1** indicates that the distributed mode is not supported. |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | cpu       | :ref:`cpu <stoptrainingjob__response_cpu>` object       | CPU specifications.                                                                                                 |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | gpu       | :ref:`gpu <stoptrainingjob__response_gpu>` object       | GPU specifications.                                                                                                 |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | npu       | :ref:`npu <stoptrainingjob__response_npu>` object       | Ascend flavors.                                                                                                     |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | memory    | :ref:`memory <stoptrainingjob__response_memory>` object | Memory information.                                                                                                 |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+
   | disk      | :ref:`disk <stoptrainingjob__response_disk>` object     | Disk information.                                                                                                   |
   +-----------+---------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------+

.. table:: **Table 47** cpu

   ========= ======= =================
   Parameter Type    Description
   ========= ======= =================
   arch      String  CPU architecture.
   core_num  Integer Number of cores.
   ========= ======= =================

.. table:: **Table 48** gpu

   ============ ======= ===============
   Parameter    Type    Description
   ============ ======= ===============
   unit_num     Integer Number of GPUs.
   product_nume String  Product name.
   memory       String  Memory.
   ============ ======= ===============

.. table:: **Table 49** npu

   ============ ====== ===============
   Parameter    Type   Description
   ============ ====== ===============
   unit_num     String Number of NPUs.
   product_name String Product name.
   memory       String Memory.
   ============ ====== ===============

.. table:: **Table 50** memory

   ========= ======= =======================
   Parameter Type    Description
   ========= ======= =======================
   size      Integer Memory size.
   unit      String  Number of memory units.
   ========= ======= =======================

.. _stoptrainingjob__response_disk:

.. table:: **Table 51** disk

   ========= ====== ==================================================
   Parameter Type   Description
   ========= ====== ==================================================
   size      String Disk size.
   unit      String Unit of the disk size. Generally, the value is GB.
   ========= ====== ==================================================

.. _stoptrainingjob__response_volumes:

.. table:: **Table 52** volumes

   +-----------+---------------------------------------------------+-------------------------------+
   | Parameter | Type                                              | Description                   |
   +===========+===================================================+===============================+
   | nfs       | :ref:`nfs <stoptrainingjob__response_nfs>` object | Volumes attached in NFS mode. |
   +-----------+---------------------------------------------------+-------------------------------+

.. _stoptrainingjob__response_nfs:

.. table:: **Table 53** nfs

   +-----------------+---------+--------------------------------------------------------------------------+
   | Parameter       | Type    | Description                                                              |
   +=================+=========+==========================================================================+
   | nfs_server_path | String  | NFS server path.                                                         |
   +-----------------+---------+--------------------------------------------------------------------------+
   | local_path      | String  | Path for attaching volumes to the training container.                    |
   +-----------------+---------+--------------------------------------------------------------------------+
   | read_only       | Boolean | Whether the volumes attached to the container in NFS mode are read-only. |
   +-----------------+---------+--------------------------------------------------------------------------+

.. _stoptrainingjob__response_log_export_path:

.. table:: **Table 54** log_export_path

   ========= ====== ====================================================
   Parameter Type   Description
   ========= ====== ====================================================
   obs_url   String OBS URL for storing training job logs.
   host_path String Path of the host where training job logs are stored.
   ========= ====== ====================================================

Example Requests
----------------

The following shows how to stop the training job whose UUID is **3faf5c03-aaa1-4cbe-879d-24b05d997347**.

.. code-block:: text

   POST   https://endpoint/v2/{project_id}/training-jobs/cf63aba9-63b1-4219-b717-708a2665100b/actions

   {
     "action_type" : "terminate"
   }

Example Responses
-----------------

**Status code: 202**

ok

.. code-block::

   {
     "kind" : "job",
     "metadata" : {
       "id" : "cf63aba9-63b1-4219-b717-708a2665100b",
       "name" : "trainjob--py14_mem06-110",
       "description" : "",
       "create_time" : 1636515222282,
       "workspace_id" : "0",
       "ai_project" : "default-ai-project",
       "user_name" : "ei_modelarts_z00424192_01"
     },
     "status" : {
       "phase" : "Terminating",
       "secondary_phase" : "Terminating",
       "duration" : 0,
       "start_time" : 0,
       "node_count_metrics" : null,
       "tasks" : [ "worker-0" ]
     },
     "algorithm" : {
       "code_dir" : "obs://test/economic_test/py_minist/",
       "boot_file" : "obs://test/economic_test/py_minist/minist_common.py",
       "inputs" : [ {
         "name" : "data_url",
         "local_dir" : "/home/ma-user/modelarts/inputs/data_url_0",
         "remote" : {
           "obs" : {
             "obs_url" : "/test/data/py_minist/"
           }
         }
       } ],
       "outputs" : [ {
         "name" : "train_url",
         "local_dir" : "/home/ma-user/modelarts/outputs/train_url_0",
         "remote" : {
           "obs" : {
             "obs_url" : "/test/train_output/"
           }
         },
         "mode" : "upload_periodically",
         "period" : 30
       } ],
       "engine" : {
         "engine_id" : "pytorch-cp36-1.4.0-v2",
         "engine_name" : "PyTorch",
         "engine_version" : "PyTorch-1.4.0-python3.6-v2",
         "v1_compatible" : false,
         "run_user" : ""
       }
     },
     "spec" : {
       "resource" : {
         "policy" : "economic",
         "flavor_id" : "modelarts.vm.p100.large.eco",
         "flavor_name" : "Computing GPU(P100) instance",
         "node_count" : 1,
         "flavor_detail" : {
           "flavor_type" : "GPU",
           "billing" : {
             "code" : "modelarts.vm.gpu.p100.eco",
             "unit_num" : 1
           },
           "attributes" : {
             "is_economic_policy_supported" : "true",
             "is_multi_devices_supported" : "false",
             "is_multi_nodes_supported" : "true"
           },
           "flavor_info" : {
             "cpu" : {
               "arch" : "x86",
               "core_num" : 8
             },
             "gpu" : {
               "unit_num" : 1,
               "product_name" : "NVIDIA-P100",
               "memory" : "8GB"
             },
             "memory" : {
               "size" : 64,
               "unit" : "GB"
             }
           }
         }
       },
       "is_hosted_log" : false
     }
   }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
202         ok
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <modelarts_03_0095>`.
