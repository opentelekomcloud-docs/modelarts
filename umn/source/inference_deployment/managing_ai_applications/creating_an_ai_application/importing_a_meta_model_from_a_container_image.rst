:original_name: inference-modelarts-0009.html

.. _inference-modelarts-0009:

Importing a Meta Model from a Container Image
=============================================

For AI engines that are not supported by ModelArts, you can import the models you compile to ModelArts from custom images.

Constraints
-----------

-  For details about custom image specifications, see :ref:`Custom Image Specifications for Creating AI Applications <modelarts_23_0219>`.
-  The configuration file must be provided for a model that you have developed and trained. The file must comply with ModelArts specifications. For details, see :ref:`Specifications for Editing a Model Configuration File <inference-modelarts-0056>`. After the writing is completed, upload the file to the specified OBS directory.

Prerequisites
-------------

The OBS directory you use and ModelArts are in the same region.

Creating an AI Application
--------------------------

#. Log in to the ModelArts management console, and choose **AI Application Management** > **AI Applications** in the left navigation pane. The **AI Applications** page is displayed.
#. Click **Create** in the upper left corner.
#. On the displayed page, set the parameters.

   a. Set basic information about the AI application. For details about the parameters, see :ref:`Table 1 <en-us_topic_0000001910054906__en-us_topic_0207629477_table19428112584211>`.

      .. _en-us_topic_0000001910054906__en-us_topic_0207629477_table19428112584211:

      .. table:: **Table 1** Parameters of basic AI application information

         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                                                                                           |
         +===================================+=======================================================================================================================================================================================================+
         | Name                              | Application name. The value can contain 1 to 64 visible characters. Only letters, digits, hyphens (-), and underscores (_) are allowed.                                                               |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Version                           | Version of the AI application to be created. For the first import, the default value is **0.0.1**.                                                                                                    |
         |                                   |                                                                                                                                                                                                       |
         |                                   | .. note::                                                                                                                                                                                             |
         |                                   |                                                                                                                                                                                                       |
         |                                   |    After an AI application is created, you can :ref:`create new versions <en-us_topic_0000001910054874__en-us_topic_0171858290_section102881451161111>` using different meta models for optimization. |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Description                       | Brief description of an AI application                                                                                                                                                                |
         +-----------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   b. Select the meta model source and set related parameters. Set **Meta Model Source** to **Container image**. For details about the parameters, see :ref:`Table 2 <en-us_topic_0000001910054906__en-us_topic_0207629477_table104931647171713>`.

      .. _en-us_topic_0000001910054906__en-us_topic_0207629477_table104931647171713:

      .. table:: **Table 2** Parameters of the meta model source

         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                 |
         +===================================+=============================================================================================================================================================================================================================================================================================================================================================================================================================+
         | Container Image Path              | Click |image1| to import the model image from the container image. The model is of the Image type, and you do not need to use **swr_location** in the configuration file to specify the image location.                                                                                                                                                                                                                     |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   | For details about how to create a custom image, see :ref:`Custom Image Specifications for Creating AI Applications <modelarts_23_0219>`.                                                                                                                                                                                                                                                                                    |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                   |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   |    The model image you select will be shared with the system administrator, so ensure you have the permission to share the image (images shared with other accounts are unsupported). When you deploy a service, ModelArts deploys the image as an inference service. Ensure that your image can be properly started and provide an inference interface.                                                                    |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Image Replication                 | Indicates whether to copy the model image in the container image to ModelArts.                                                                                                                                                                                                                                                                                                                                              |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   | -  When this function is disabled, the model image is not copied, AI applications can be created quickly, but modifying or deleting images in the source directory of SWR may affect service deployment.                                                                                                                                                                                                                    |
         |                                   | -  When this function is enabled, the model image is copied, AI applications cannot be created quickly, but you can modify or delete images in the source directory of SWR as that would not affect service deployment.                                                                                                                                                                                                     |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Health Check                      | Health check on an AI application. This parameter is configurable only when the health check API is configured in the custom image. Otherwise, the AI application deployment will fail.                                                                                                                                                                                                                                     |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   | -  **Check Mode**: Select **HTTP request** or **Command**.                                                                                                                                                                                                                                                                                                                                                                  |
         |                                   | -  **Health Check URL**: This parameter is displayed when **Check Mode** is set to **HTTP request**. Enter the health check URL. The default value is **/health**.                                                                                                                                                                                                                                                          |
         |                                   | -  **Health Check Command**: This parameter is displayed when **Check Mode** is set to **Command**. Enter the health check command.                                                                                                                                                                                                                                                                                         |
         |                                   | -  **Health Check Period**: Enter an integer ranging from 1 to 2147483647. The unit is second. The default value is **5**.                                                                                                                                                                                                                                                                                                  |
         |                                   | -  **Delay**: specifies the delay for performing the health check after the instance is started. Enter an integer ranging from 0 to 2147483647. The unit is second and cannot be empty. The default value is **12**.                                                                                                                                                                                                        |
         |                                   | -  **Maximum Failures**: Enter an integer ranging from 1 to 2147483647. During service startup, if the number of consecutive health check failures reaches the specified value, the service will be abnormal. During service running, if the number of consecutive health check failures reaches the specified value, the service will enter the alarm status. The default value is **12**.                                 |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                   |
         |                                   |                                                                                                                                                                                                                                                                                                                                                                                                                             |
         |                                   |    If health check is configured for an AI application, the deployed services using this AI application will stop 3 minutes after receiving the stop instruction.                                                                                                                                                                                                                                                           |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | AI Application Description        | Provide AI application descriptions to help other AI application developers better understand and use your applications. Click **Add AI Application Description** and set the **Document name** and **URL**. You can add up to three AI application descriptions.                                                                                                                                                           |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Deployment Type                   | Select the service types that the application can be deployed. When deploying a service, only the service types selected here are available. For example, if you only select **Real-time services** here, you can only deploy the AI application as a real-time service after it is created.                                                                                                                                |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Start command                     | customizable start command of a model                                                                                                                                                                                                                                                                                                                                                                                       |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Apis                              | When you enable this function, you can edit RESTful APIs to define the AI application input and output formats. The API configuration must comply with ModelArts specifications. For details, see apis parameters in :ref:`Specifications for Editing a Model Configuration File <inference-modelarts-0056>`. :ref:`Code Example of apis Parameters <en-us_topic_0000001943974157__section9498141310396>` shows an example. |
         +-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   c. Check the information and click **Next**. The AI application is created.

      In the AI application list, you can view the created AI application and its version. When the status changes to **Normal**, the AI application is successfully created. On this page, you can perform such operations as creating new versions, quickly deploying AI applications, and publishing AI applications.

Follow-Up Procedure
-------------------

:ref:`Deploying an AI Application as a Service <en-us_topic_0000001910014914__section5706068262>`: In the AI application list, click the down arrow on the left of an AI application name to check all versions of the AI application. Locate the row that contains the target version, click **Deploy** in the **Operation** column, and select a deployment type from the drop-down list box. The AI application can be deployed in a deployment type selected during AI application creation.

.. |image1| image:: /_static/images/en-us_image_0000001943974229.png
